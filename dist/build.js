!function(g){var e={};function r(n){if(e[n])return e[n].exports;var I=e[n]={i:n,l:!1,exports:{}};return g[n].call(I.exports,I,I.exports,r),I.l=!0,I.exports}r.m=g,r.c=e,r.d=function(n,I,g){r.o(n,I)||Object.defineProperty(n,I,{enumerable:!0,get:g})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(I,n){if(1&n&&(I=r(I)),8&n)return I;if(4&n&&"object"==typeof I&&I&&I.__esModule)return I;var g=Object.create(null);if(r.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:I}),2&n&&"string"!=typeof I)for(var e in I)r.d(g,e,function(n){return I[n]}.bind(null,e));return g},r.n=function(n){var I=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(I,"a",I),I},r.o=function(n,I){return Object.prototype.hasOwnProperty.call(n,I)},r.p="/dist/",r(r.s=1)}([function(module,exports,__webpack_require__){eval('module.exports = function() {\n  return new Worker(__webpack_require__.p + "d306dafa9338a99f7d6e.worker.js");\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvd29ya2VyLnRzP2VlNGYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxvQkFBb0IscUJBQXVCO0FBQzNDIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFdvcmtlcihfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZDMwNmRhZmE5MzM4YTk5ZjdkNmUud29ya2VyLmpzXCIpO1xufTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/worker-loader/dist/cjs.js!./src/worker.ts\nvar cjs_js_src_worker = __webpack_require__(0);\nvar worker_default = /*#__PURE__*/__webpack_require__.n(cjs_js_src_worker);\n\n// CONCATENATED MODULE: ./src/renderizador.ts\nfunction renderizar(render, tela) {\n    render.limparTela();\n    for (var y = 0; y < 32; ++y) {\n        for (var x = 0; x < 64; ++x) {\n            var pixel = tela[y][x];\n            if (pixel !== 0) {\n                render.mudarCor('#ff0000');\n            }\n            else {\n                render.mudarCor('#000000');\n            }\n            render.desenharQuadrado(x * 8, y * 8, 8, 8);\n        }\n    }\n}\n\n// CONCATENATED MODULE: ./src/renderizadorCanvas.ts\nvar RenderizadorCanvas = /** @class */ (function () {\n    function RenderizadorCanvas(ctx) {\n        this.PIXEL_TAMANHO = 8;\n        this._ctx = ctx;\n        this._largura = this.PIXEL_TAMANHO * 64;\n        this._altura = this.PIXEL_TAMANHO * 32;\n    }\n    RenderizadorCanvas.prototype.mudarCor = function (cor) {\n        this._ctx.fillStyle = cor;\n    };\n    RenderizadorCanvas.prototype.desenharQuadrado = function (x, y, l, a) {\n        this._ctx.fillRect(x, y, l, a);\n    };\n    RenderizadorCanvas.prototype.limparTela = function () {\n        this._ctx.clearRect(0, 0, this._largura, this._altura);\n    };\n    return RenderizadorCanvas;\n}());\n/* harmony default export */ var renderizadorCanvas = (RenderizadorCanvas);\n\n// CONCATENATED MODULE: ./src/main.ts\n\n\n\nfunction enviarPrograma(worker, arquivo) {\n    var leitor = new FileReader();\n    leitor.onload = function () {\n        if (this.result === null || typeof this.result === 'string') {\n            throw new Error('Erro ao ler arquivo');\n        }\n        //chip8.carregarPrograma(new Uint8Array(this.result));\n        worker.postMessage({\n            mensagem: 'carregar',\n            rom: new Uint8Array(this.result),\n        });\n    };\n    if (arquivo instanceof Blob)\n        leitor.readAsArrayBuffer(arquivo);\n}\nfunction main() {\n    var worker = new worker_default.a();\n    //worker.postMessage({a: 1});\n    var canvas = document.querySelector('canvas#chip-8');\n    if (canvas === null) {\n        throw new Error('Erro ao buscar canvas');\n    }\n    var ctx = canvas.getContext('2d');\n    if (ctx === null) {\n        throw new Error('Erro ao buscar contexto do canvas');\n    }\n    var renderizador = new renderizadorCanvas(ctx);\n    worker.addEventListener(\"message\", function (evento) {\n        if (typeof evento.data.mensagem !== 'string') {\n            return;\n        }\n        switch (evento.data.mensagem) {\n            case 'renderizar':\n                renderizar(renderizador, evento.data.tela);\n                break;\n        }\n    });\n    var input = document.querySelector('input#rom-arquivo');\n    if (input === null) {\n        console.error('Erro: elemento input nÃ£o encontrado');\n        return;\n    }\n    try {\n        input.addEventListener('change', function () {\n            if (this.files === null) {\n                window.alert('Erro ao ler arquivo');\n                return;\n            }\n            enviarPrograma(worker, this.files[0]);\n        });\n    }\n    catch (e) {\n        window.alert(e);\n        console.error(e);\n    }\n}\ntry {\n    main();\n}\ncatch (e) {\n    window.alert(e);\n    console.error(e);\n}\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyaXphZG9yLnRzPzU4ODUiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmRlcml6YWRvckNhbnZhcy50cz80OTZlIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzP2E0Y2UiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFPO0FBQ1A7QUFDQSxtQkFBbUIsUUFBUTtBQUMzQix1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNjLHlFQUFrQixFQUFDOzs7QUNsQlU7QUFDQTtBQUNVO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsZ0JBQU07QUFDM0IsMEJBQTBCLEtBQUs7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrQkFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFVBQVU7QUFDMUI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiByZW5kZXJpemFyKHJlbmRlciwgdGVsYSkge1xuICAgIHJlbmRlci5saW1wYXJUZWxhKCk7XG4gICAgZm9yICh2YXIgeSA9IDA7IHkgPCAzMjsgKyt5KSB7XG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgNjQ7ICsreCkge1xuICAgICAgICAgICAgdmFyIHBpeGVsID0gdGVsYVt5XVt4XTtcbiAgICAgICAgICAgIGlmIChwaXhlbCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHJlbmRlci5tdWRhckNvcignI2ZmMDAwMCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyLm11ZGFyQ29yKCcjMDAwMDAwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW5kZXIuZGVzZW5oYXJRdWFkcmFkbyh4ICogOCwgeSAqIDgsIDgsIDgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwidmFyIFJlbmRlcml6YWRvckNhbnZhcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZW5kZXJpemFkb3JDYW52YXMoY3R4KSB7XG4gICAgICAgIHRoaXMuUElYRUxfVEFNQU5ITyA9IDg7XG4gICAgICAgIHRoaXMuX2N0eCA9IGN0eDtcbiAgICAgICAgdGhpcy5fbGFyZ3VyYSA9IHRoaXMuUElYRUxfVEFNQU5ITyAqIDY0O1xuICAgICAgICB0aGlzLl9hbHR1cmEgPSB0aGlzLlBJWEVMX1RBTUFOSE8gKiAzMjtcbiAgICB9XG4gICAgUmVuZGVyaXphZG9yQ2FudmFzLnByb3RvdHlwZS5tdWRhckNvciA9IGZ1bmN0aW9uIChjb3IpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IGNvcjtcbiAgICB9O1xuICAgIFJlbmRlcml6YWRvckNhbnZhcy5wcm90b3R5cGUuZGVzZW5oYXJRdWFkcmFkbyA9IGZ1bmN0aW9uICh4LCB5LCBsLCBhKSB7XG4gICAgICAgIHRoaXMuX2N0eC5maWxsUmVjdCh4LCB5LCBsLCBhKTtcbiAgICB9O1xuICAgIFJlbmRlcml6YWRvckNhbnZhcy5wcm90b3R5cGUubGltcGFyVGVsYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLl9sYXJndXJhLCB0aGlzLl9hbHR1cmEpO1xuICAgIH07XG4gICAgcmV0dXJuIFJlbmRlcml6YWRvckNhbnZhcztcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBSZW5kZXJpemFkb3JDYW52YXM7XG4iLCJpbXBvcnQgV29ya2VyIGZyb20gJ3dvcmtlci1sb2FkZXIhLi93b3JrZXInO1xuaW1wb3J0IHsgcmVuZGVyaXphciB9IGZyb20gJy4vcmVuZGVyaXphZG9yJztcbmltcG9ydCBSZW5kZXJpemFkb3JDYW52YXMgZnJvbSAnLi9yZW5kZXJpemFkb3JDYW52YXMnO1xuZnVuY3Rpb24gZW52aWFyUHJvZ3JhbWEod29ya2VyLCBhcnF1aXZvKSB7XG4gICAgdmFyIGxlaXRvciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgbGVpdG9yLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0ID09PSBudWxsIHx8IHR5cGVvZiB0aGlzLnJlc3VsdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJybyBhbyBsZXIgYXJxdWl2bycpO1xuICAgICAgICB9XG4gICAgICAgIC8vY2hpcDguY2FycmVnYXJQcm9ncmFtYShuZXcgVWludDhBcnJheSh0aGlzLnJlc3VsdCkpO1xuICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgbWVuc2FnZW06ICdjYXJyZWdhcicsXG4gICAgICAgICAgICByb206IG5ldyBVaW50OEFycmF5KHRoaXMucmVzdWx0KSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBpZiAoYXJxdWl2byBpbnN0YW5jZW9mIEJsb2IpXG4gICAgICAgIGxlaXRvci5yZWFkQXNBcnJheUJ1ZmZlcihhcnF1aXZvKTtcbn1cbmZ1bmN0aW9uIG1haW4oKSB7XG4gICAgdmFyIHdvcmtlciA9IG5ldyBXb3JrZXIoKTtcbiAgICAvL3dvcmtlci5wb3N0TWVzc2FnZSh7YTogMX0pO1xuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMjY2hpcC04Jyk7XG4gICAgaWYgKGNhbnZhcyA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm8gYW8gYnVzY2FyIGNhbnZhcycpO1xuICAgIH1cbiAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgaWYgKGN0eCA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm8gYW8gYnVzY2FyIGNvbnRleHRvIGRvIGNhbnZhcycpO1xuICAgIH1cbiAgICB2YXIgcmVuZGVyaXphZG9yID0gbmV3IFJlbmRlcml6YWRvckNhbnZhcyhjdHgpO1xuICAgIHdvcmtlci5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBmdW5jdGlvbiAoZXZlbnRvKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZXZlbnRvLmRhdGEubWVuc2FnZW0gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChldmVudG8uZGF0YS5tZW5zYWdlbSkge1xuICAgICAgICAgICAgY2FzZSAncmVuZGVyaXphcic6XG4gICAgICAgICAgICAgICAgcmVuZGVyaXphcihyZW5kZXJpemFkb3IsIGV2ZW50by5kYXRhLnRlbGEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFyIGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXQjcm9tLWFycXVpdm8nKTtcbiAgICBpZiAoaW5wdXQgPT09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJybzogZWxlbWVudG8gaW5wdXQgbsOjbyBlbmNvbnRyYWRvJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlsZXMgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoJ0Vycm8gYW8gbGVyIGFycXVpdm8nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbnZpYXJQcm9ncmFtYSh3b3JrZXIsIHRoaXMuZmlsZXNbMF0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgd2luZG93LmFsZXJ0KGUpO1xuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbn1cbnRyeSB7XG4gICAgbWFpbigpO1xufVxuY2F0Y2ggKGUpIHtcbiAgICB3aW5kb3cuYWxlcnQoZSk7XG4gICAgY29uc29sZS5lcnJvcihlKTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n")}]);