!function(A){var C={};function B(g){if(C[g])return C[g].exports;var I=C[g]={i:g,l:!1,exports:{}};return A[g].call(I.exports,I,I.exports,B),I.l=!0,I.exports}B.m=A,B.c=C,B.d=function(g,I,A){B.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:A})},B.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},B.t=function(I,g){if(1&g&&(I=B(I)),8&g)return I;if(4&g&&"object"==typeof I&&I&&I.__esModule)return I;var A=Object.create(null);if(B.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:I}),2&g&&"string"!=typeof I)for(var C in I)B.d(A,C,function(g){return I[g]}.bind(null,C));return A},B.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return B.d(I,"a",I),I},B.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},B.p="/dist/",B(B.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/chip8.ts\n/**\n * @fileoverview Máquina vírtual do CHIP-8\n * @author Roberto Nazareth Guedes\n */\nvar Chip8 = /** @class */ (function () {\n    function Chip8() {\n        this._opcode = 0;\n        this._sp = 0;\n        this._pc = 0x200;\n        this._i = 0;\n        this._delayTempo = 0;\n        this._somTempo = 0;\n        this._esperandoInput = false;\n        this._esperandoRegistrador = 0;\n        this._desenharFlag = false;\n        this._tela = new Array(32);\n        this._memoria = new Uint8Array(0x1000);\n        this._stack = new Uint16Array(16);\n        this._v = new Uint8Array(16);\n        this._teclado = new Uint8Array(16);\n        for (var i = 0; i < 32; ++i) {\n            this._tela[i] = new Array(64);\n            for (var j = 0; j < 64; ++j) {\n                this._tela[i][j] = 0;\n            }\n        }\n        for (var i = 0; i < Chip8.MEMORIA_TAMANHO; ++i) {\n            this._memoria[i] = 0;\n        }\n        for (var i = 0; i < this._stack.length; ++i) {\n            this._stack[i] = 0;\n        }\n        for (var i = 0; i < this._v.length; ++i) {\n            this._v[i] = 0;\n        }\n        for (var i = 0; i < this._teclado.length; ++i) {\n            this._teclado[i] = 0;\n        }\n        this.carregarFonte();\n    }\n    /** Reseta o emulador ao seu estado inicial */\n    Chip8.prototype.resetar = function () {\n        this._opcode = 0;\n        this._sp = 0;\n        this._pc = 0x200;\n        this._i = 0;\n        this._delayTempo = 0;\n        this._somTempo = 0;\n        this._esperandoInput = false;\n        this._esperandoRegistrador = 0;\n        this._desenharFlag = false;\n        for (var i = 0; i < 32; ++i) {\n            for (var j = 0; j < 64; ++j) {\n                this._tela[i][j] = 0;\n            }\n        }\n        for (var i = 0; i < Chip8.MEMORIA_TAMANHO; ++i) {\n            this._memoria[i] = 0;\n        }\n        for (var i = 0; i < 16; ++i) {\n            this._stack[i] = 0;\n        }\n        for (var i = 0; i < 16; ++i) {\n            this._v[i] = 0;\n        }\n        for (var i = 0; i < 16; ++i) {\n            this._teclado[i] = 0;\n        }\n        this.carregarFonte();\n    };\n    /**\n     * Carrega um programa na memória\n     * @param buffer Programa a ser carregado na memória\n     */\n    Chip8.prototype.carregarPrograma = function (buffer) {\n        var _this = this;\n        buffer.forEach(function (byte, i) {\n            var pos = i + 0x200;\n            if (pos < Chip8.MEMORIA_TAMANHO) {\n                _this._memoria[pos] = byte;\n            }\n        });\n    };\n    /** Emula um ciclo da CPU */\n    Chip8.prototype.emularCiclo = function () {\n        var _this = this;\n        if (this._esperandoInput) {\n            this._teclado.forEach(function (tecla) {\n                if (tecla !== 0) {\n                    // parar de esperar input se o\n                    // usuário pressionar uma tecla\n                    _this._esperandoInput = false;\n                    _this._v[_this._esperandoRegistrador] = tecla;\n                }\n            });\n            return;\n        }\n        this.buscarOpcode();\n        this.executarOpcode();\n        if (this._delayTempo > 0) {\n            --this._delayTempo;\n        }\n        if (this._somTempo > 0) {\n            if (this._somTempo === 1) {\n                // BEEp\n            }\n            --this._somTempo;\n        }\n    };\n    /** Carrega a fonte na memória */\n    Chip8.prototype.carregarFonte = function () {\n        var fonte = [\n            0xF0, 0x90, 0x90, 0x90, 0xF0,\n            0x20, 0x60, 0x20, 0x20, 0x70,\n            0xF0, 0x10, 0xF0, 0x80, 0xF0,\n            0xF0, 0x10, 0xF0, 0x10, 0xF0,\n            0x90, 0x90, 0xF0, 0x10, 0x10,\n            0xF0, 0x80, 0xF0, 0x10, 0xF0,\n            0xF0, 0x80, 0xF0, 0x90, 0xF0,\n            0xF0, 0x10, 0x20, 0x40, 0x40,\n            0xF0, 0x90, 0xF0, 0x90, 0xF0,\n            0xF0, 0x90, 0xF0, 0x10, 0xF0,\n            0xF0, 0x90, 0xF0, 0x90, 0x90,\n            0xE0, 0x90, 0xE0, 0x90, 0xE0,\n            0xF0, 0x80, 0x80, 0x80, 0xF0,\n            0xE0, 0x90, 0x90, 0x90, 0xE0,\n            0xF0, 0x80, 0xF0, 0x80, 0xF0,\n            0xF0, 0x80, 0xF0, 0x80, 0x80,\n        ];\n        for (var i = 0; i < 80; ++i) {\n            this._memoria[i] = fonte[i];\n        }\n    };\n    /**\n     * Busca o opcode de acordo com o endereço atual do contador de programa\n     * e atribui este valor para a propriedade "opcode" da cpu.\n     */\n    Chip8.prototype.buscarOpcode = function () {\n        // opcodes tem 2 bytes (16 bits), então, precisamos juntar dois bytes.\n        // Por exemplo: se o valor do primeiro byte for A2, e o do segundo for F0, \n        // então o opcode será A2F0.\n        // "memoria[pc] << 8" cria 4 zeros no numero (em binario), e depois a operação\n        // bitwise OR junta os 2 numeros\n        var primeiro = this._memoria[this._pc];\n        var segundo = this._memoria[this._pc + 1];\n        this._opcode = (primeiro << 8) | segundo;\n    };\n    Chip8.prototype.executarOpcode = function () {\n        switch (this._opcode & 0xF000) {\n            case 0x0000:\n                this.executarOp_0xxx();\n                break;\n            case 0x1000:\n                this.op_1nnn_jp();\n                break;\n            case 0x2000:\n                this.op_2nnn_call();\n                break;\n            case 0x3000:\n                this.op_3xkk_se();\n                break;\n            case 0x4000:\n                this.op_4xkk_sne();\n                break;\n            case 0x5000:\n                this.op_5xy0_se();\n                break;\n            case 0x6000:\n                this.op_6xkk_ld();\n                break;\n            case 0x7000:\n                this.op_7xkk_add();\n                break;\n            case 0x8000:\n                this.executarOp_8xxx();\n                break;\n            case 0x9000:\n                this.op_9xy0_sne();\n                break;\n            case 0xA000:\n                this.op_annn_ld();\n                break;\n            case 0xB000:\n                this.op_bnnn_jmp();\n                break;\n            case 0xC000:\n                this.op_cxkk_rnd();\n                break;\n            case 0xD000:\n                this.op_dxyn_draw();\n                break;\n            case 0xE000:\n                this.executarOp_exxx();\n                break;\n            case 0xF000:\n                this.executarOp_fxxx();\n                break;\n            default:\n                console.error("Opcode desconhecido: " + this._opcode);\n                this._pc += 2;\n                break;\n        }\n    };\n    Chip8.prototype.executarOp_0xxx = function () {\n        switch (this._opcode & 0x00FF) {\n            case 0x00EE:\n                this.op_00ee_ret();\n                break;\n            case 0x00E0:\n                this.op_00e0_clr();\n                break;\n            default:\n                console.error("Opcode desconhecido: " + this._opcode);\n                this._pc += 2;\n                break;\n        }\n    };\n    Chip8.prototype.executarOp_8xxx = function () {\n        switch (this._opcode & 0x000F) {\n            case 0x0000:\n                this.op_8xy0_ld();\n                break;\n            case 0x0001:\n                this.op_8xy1_or();\n                break;\n            case 0x0002:\n                this.op_8xy2_and();\n                break;\n            case 0x0003:\n                this.op_8xy3_xor();\n                break;\n            case 0x0004:\n                this.op_8xy4_add();\n                break;\n            case 0x0005:\n                this.op_8xy5_sub();\n                break;\n            case 0x0006:\n                this.op_8x06_shr();\n                break;\n            case 0x0007:\n                this.op_8xy7_subn();\n                break;\n            case 0x000E:\n                this.op_8x0e_shl();\n                break;\n            default:\n                console.error("Opcode desconhecido: " + this._opcode);\n                this._pc += 2;\n                break;\n        }\n    };\n    Chip8.prototype.executarOp_exxx = function () {\n        switch (this._opcode & 0x00FF) {\n            case 0x009E:\n                this.op_ex9e_skp();\n                break;\n            case 0x00A1:\n                this.op_exa1_sknp();\n                break;\n            default:\n                console.error("Opcode desconhecido: " + this._opcode);\n                this._pc += 2;\n                break;\n        }\n    };\n    Chip8.prototype.executarOp_fxxx = function () {\n        switch (this._opcode & 0x00FF) {\n            case 0x0007:\n                this.op_fx07_ld();\n                break;\n            case 0x000A:\n                this.op_fx0a_ld();\n                break;\n            case 0x0015:\n                this.op_fx15_ld();\n                break;\n            case 0x0018:\n                this.op_fx18_ld();\n                break;\n            case 0x001E:\n                this.op_fx1e_add();\n                break;\n            case 0x0029:\n                this.op_fx29_ld();\n                break;\n            case 0x0033:\n                this.op_fx33_ld();\n                break;\n            case 0x0055:\n                this.op_fx55_ld();\n                break;\n            case 0x0065:\n                this.op_fx65_ld();\n                break;\n            default:\n                console.error("Opcode desconhecido: " + this._opcode);\n                this._pc += 2;\n                break;\n        }\n    };\n    /**\n     * CLR\n     * Limpa a tela\n     */\n    Chip8.prototype.op_00e0_clr = function () {\n        for (var i = 0; i < 32; ++i) {\n            for (var j = 0; j < 64; ++j) {\n                this._tela[i][j] = 0;\n            }\n        }\n        this._desenharFlag = true;\n        this._pc += 2;\n    };\n    /**\n     * Opcode 00EE, returna de uma subrotina\n     */\n    Chip8.prototype.op_00ee_ret = function () {\n        this._pc = this._stack[this._sp - 1];\n        this._sp -= 1;\n        this._pc += 2;\n    };\n    /**\n     * JP endereco\n     * Opcode 1nnn: pula o programa para um endereço, onde nnn é o endereço\n     */\n    Chip8.prototype.op_1nnn_jp = function () {\n        this._pc = this.nnn;\n    };\n    /**\n     * Opcode 2nnn: pula o programa para uma subrotina, onde nnn é o endereço da subrotina.\n     */\n    Chip8.prototype.op_2nnn_call = function () {\n        // guarda o endereço atual do programa na stack\n        this._stack[this._sp] = this._pc;\n        this._sp += 1;\n        this._pc = this.nnn;\n    };\n    /**\n     * Opcode 3xkk: pula a proxima instrução se kk for igual a Vx\n     */\n    Chip8.prototype.op_3xkk_se = function () {\n        if (this._v[this.x] === this.kk) {\n            this._pc += 4;\n        }\n        else {\n            this._pc += 2;\n        }\n    };\n    /**\n     * Opcode 4xkk: pula a proxima instrução se kk for diferente de Vx\n     */\n    Chip8.prototype.op_4xkk_sne = function () {\n        if (this._v[this.x] !== this.kk) {\n            this._pc += 4;\n        }\n        else {\n            this._pc += 2;\n        }\n    };\n    /**\n     * Opcode 5xy0: pula a proxima instrução se Vx for igual a Vy\n     */\n    Chip8.prototype.op_5xy0_se = function () {\n        if (this._v[this.x] === this._v[this.y]) {\n            this._pc += 4;\n        }\n        else {\n            this._pc += 2;\n        }\n    };\n    /**\n     * LD Vx, byte\n     * Opcode 6xkk: guarda o valor kk em Vx\n     */\n    Chip8.prototype.op_6xkk_ld = function () {\n        this._v[this.x] = this.kk;\n        this._pc += 2;\n    };\n    /**\n     * ADD Vx, byte\n     * Opcode 7xkk: adiciona o valor kk ao registrador Vx\n     */\n    Chip8.prototype.op_7xkk_add = function () {\n        this._v[this.x] += this.kk;\n        this._pc += 2;\n    };\n    /**\n     * LD Vx, Vy\n     * opcode 8xy0: salva o valor de Vy no registrador Vx\n     */\n    Chip8.prototype.op_8xy0_ld = function () {\n        this._v[this.x] = this._v[this.y];\n        this._pc += 2;\n    };\n    /**\n     * OR Vx, Vy\n     * opcode 8xy1: performa uma uma operação bitwise OR\n     * nos valores de Vx e Vy, e salva o resultado no\n     * registrador Vx\n     */\n    Chip8.prototype.op_8xy1_or = function () {\n        this._v[this.x] |= this._v[this.y];\n        this._pc += 2;\n    };\n    /**\n     * AND Vx, Vy\n     * opcode 8xy2: performa uma uma operação bitwise AND\n     * nos valores de Vx e Vy, e salva o resultado no\n     * registrador Vx\n     */\n    Chip8.prototype.op_8xy2_and = function () {\n        this._v[this.x] &= this._v[this.y];\n        this._pc += 2;\n    };\n    /**\n    * XOR Vx, Vy\n    * opcode 8xy3: performa uma uma operação bitwise XOR (OR exclusivo)\n    * nos valores de Vx e Vy, e salva o resultado no\n    * registrador Vx\n    */\n    Chip8.prototype.op_8xy3_xor = function () {\n        this._v[this.x] ^= this._v[this.y];\n        this._pc += 2;\n    };\n    /**\n     * ADD Vx, Vy\n     * opcode 8xy4: adiciona o valor de Vy a Vx e ativa a carry flag\n     * do registrador VF caso o resultado seja maior do que 255\n     */\n    Chip8.prototype.op_8xy4_add = function () {\n        this._v[this.x] += this._v[this.y];\n        this._v[0xF] = +(this._v[this.x] > 255);\n        this._pc += 2;\n    };\n    /**\n     * SUB Vx, Vy\n     * opcode 8xy5: subtrai Vx por Vy e guarda o resultado em Vx.\n     * Caso Vx seja maior que Vy, VF é igual a 1, e caso o contrario\n     * é igual a 0\n     */\n    Chip8.prototype.op_8xy5_sub = function () {\n        this._v[0xF] = +(this._v[this.x] > this._v[this.y]);\n        this._v[this.x] -= this._v[this.y];\n        /*\n        if (this._v[this.x] < 0) {\n            this._v[this.x] += 256;\n        }\n        */\n        this._pc += 2;\n    };\n    /**\n     * SHR Vx\n     * opcode 8x06: desloca o número uma casa (em binário) para a direita (right shift).\n     * O bit menos significativo do valor original de Vx é salvo no\n     * registrador VF\n     */\n    Chip8.prototype.op_8x06_shr = function () {\n        var vx = this._v[this.x];\n        this._v[0xF] = 0x1 & vx;\n        this._v[this.x] = vx >> 1;\n        this._pc += 2;\n    };\n    /**\n     * SUBN Vx, Vy\n     * opcode 8xy7: subtrai Vy por Vx e guarda o resultado em Vx.\n     * Caso Vx seja maior que Vy, VF é igual a 1, e caso o contrario\n     * é igual a 0\n     */\n    Chip8.prototype.op_8xy7_subn = function () {\n        var vx = this._v[this.x];\n        var vy = this._v[this.y];\n        this._v[0xF] = vy > vx ? 1 : 0;\n        this._v[this.x] = vy - vx;\n        this._pc += 2;\n    };\n    /**\n     * SHL Vx\n     * opcode 8x0E: desloca o número uma casa (em binário) para a esquerda (left shift).\n     * O bit mais significativo do valor original de Vx é salvo no\n     * registrador VF\n     */\n    Chip8.prototype.op_8x0e_shl = function () {\n        var vx = this._v[this.x];\n        /*\n        this._v[0xF] = +(this._v[this.x] & 0x80);\n        this._v[this.x] <<= 1;\n        */\n        this._v[0xF] = vx >> 7;\n        this._v[this.x] = vx << 1;\n        this._pc += 2;\n    };\n    /**\n     * SNE Vx, Vy\n     * Pula a proxima instrução se Vx for diferente de Vy\n     */\n    Chip8.prototype.op_9xy0_sne = function () {\n        if (this._v[this.x] !== this._v[this.y]) {\n            this._pc += 4;\n        }\n        else {\n            this._pc += 2;\n        }\n    };\n    /**\n     * JMP V0, endereco\n     * Pula para o endereço nnn + V0\n     */\n    Chip8.prototype.op_annn_ld = function () {\n        this._i = this.nnn;\n        this._pc += 2;\n    };\n    /**\n     * JMP V0, endereco\n     * Pula para o endereço nnn + V0\n     */\n    Chip8.prototype.op_bnnn_jmp = function () {\n        this._pc = this._v[this.x] + this.nnn;\n    };\n    /**\n     * RND Vx, byte\n     * Vx = byte aleatório & kk\n     */\n    Chip8.prototype.op_cxkk_rnd = function () {\n        var byte_aleatorio = Math.floor(Math.random() * 0xFF) & (this._opcode & 0xFF);\n        this._v[this.x] = byte_aleatorio & this.kk;\n        this._pc += 2;\n    };\n    Chip8.prototype.setPixel = function (pos_x, pos_y, fim_sprite) {\n        var colisao = 0;\n        var sprite = this._memoria.slice(this._i, fim_sprite + 1);\n        for (var i = 0; i < sprite.length - 1; ++i) {\n            for (var j = 0; j < 8; ++j) {\n                var x = (pos_x + j) % 64;\n                var y = (pos_y + i) % 32;\n                if ((sprite[i] & (0x80 >> j)) !== 0) {\n                    if (this._tela[y][x] === 1) {\n                        colisao = 1;\n                    }\n                    this._tela[y][x] ^= 1;\n                }\n            }\n        }\n        this._desenharFlag = true;\n        return colisao;\n    };\n    /**\n     * Desenha um sprite na coordenada (Vx, Vy), com 8 pixels de largura e N de altura\n     */\n    Chip8.prototype.op_dxyn_draw = function () {\n        var n = this._opcode & 0x000F;\n        var fim_sprite = this._i + n;\n        this._v[0xF] = this.setPixel(this._v[this.x], this._v[this.y], fim_sprite);\n        this._pc += 2;\n    };\n    /**\n     * SKP Vx\n     * pula a próxima instrução se a tecla com o valor de Vx estiver sendo pressionada\n     */\n    Chip8.prototype.op_ex9e_skp = function () {\n        var tecla = this._v[this.x];\n        if (this._teclado[tecla] !== 0) {\n            this._pc += 4;\n        }\n        else {\n            this._pc += 2;\n        }\n    };\n    /**\n     * SKNP Vx\n     * pula a próxima instrução se a tecla com o valor de Vx não estiver sendo pressionada\n     */\n    Chip8.prototype.op_exa1_sknp = function () {\n        var tecla = this._v[this.x];\n        if (this._teclado[tecla] === 0) {\n            this._pc += 4;\n        }\n        else {\n            this._pc += 2;\n        }\n    };\n    /**\n     * LD Vx, K\n     * Espera o usuário pressionar uma tecla, e atribui o valor a Vx\n     */\n    Chip8.prototype.op_fx0a_ld = function () {\n        //this._esperandoRegistrador = this.x;\n        this._esperandoInput = true;\n        this._esperandoRegistrador = this.x;\n        for (var i = 0; i < this._teclado.length; ++i) {\n            this._teclado[i] = 0;\n        }\n        this._pc += 2;\n    };\n    /**\n     * LD Vx, DELAY_TIMER\n     * Atribui o valor do temporizador de delay ao Vx\n     */\n    Chip8.prototype.op_fx07_ld = function () {\n        this._v[this.x] = this._delayTempo;\n        this._pc += 2;\n    };\n    /**\n     * LD DELAY_TIMER, Vx\n     * Atribui o valor de Vx ao temporizador de delay\n     */\n    Chip8.prototype.op_fx15_ld = function () {\n        this._delayTempo = this._v[this.x];\n        this._pc += 2;\n    };\n    /**\n     * LD SOUND_TIMER, Vx\n     * Atribui o valor de Vx ao temporizador de som\n     */\n    Chip8.prototype.op_fx18_ld = function () {\n        this._somTempo = this._v[this.x];\n        this._pc += 2;\n    };\n    /**\n     * ADD I, Vx\n     * I = I + Vx\n     */\n    Chip8.prototype.op_fx1e_add = function () {\n        this._i += this._v[this.x];\n        this._pc += 2;\n    };\n    /**\n     * LD F, Vx\n     * Atribui ao I o endereço do sprite correspondente à Vx\n     */\n    Chip8.prototype.op_fx29_ld = function () {\n        this._i = this.x * 5;\n        this._pc += 2;\n    };\n    /**\n     * LD B, Vx\n     * opcode Fx33: Guarda a representação em codificação binária decimal (BCD)\n     * do valor do registrador Vx. O digito na casa das centenas será salvo no\n     * endereço "i" (o registrador de index), a casa das dezenas será salva no\n     * endereço "i + 1", e o digito da casa das unidades erá salvo em "i + 2"\n     */\n    Chip8.prototype.op_fx33_ld = function () {\n        var valor = this._v[this.x];\n        this._memoria[this._i] = valor / 100;\n        this._memoria[this._i + 1] = (valor / 10) % 10;\n        this._memoria[this._i + 2] = (valor % 100) % 10;\n        this._pc += 2;\n    };\n    /**\n     * LD [I], Vx\n     * Guarda os valores de V0 à Vx na memória a partir do endereço I\n     */\n    Chip8.prototype.op_fx55_ld = function () {\n        for (var i = 0; i <= this.x; i++) {\n            this._memoria[i + this._i] = this._v[i];\n        }\n        this._pc += 2;\n    };\n    /**\n     * LD Vx, [I]\n     * Preenche os registradores de V0 à Vx com valores na memória a partir do endereço I\n     */\n    Chip8.prototype.op_fx65_ld = function () {\n        for (var i = 0; i <= this.x; i++) {\n            this._v[i] = this._memoria[i + this._i];\n        }\n        this._pc += 2;\n    };\n    /** Registra que uma tecla foi apertada */\n    Chip8.prototype.teclaBaixo = function (tecla) {\n        this._teclado[tecla] = 1;\n    };\n    /** Registra que uma tecla foi solta */\n    Chip8.prototype.teclaCima = function (tecla) {\n        this._teclado[tecla] = 0;\n    };\n    Object.defineProperty(Chip8.prototype, "v", {\n        get: function () {\n            return this._v;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "opcode", {\n        get: function () {\n            return this._opcode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "nnn", {\n        /** As 3 últimas casas (em hexadecimal) do opcode */\n        get: function () {\n            return this._opcode & 0x0FFF;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "kk", {\n        /** As 2 últimas casas (em hexadecimal) do opcode */\n        get: function () {\n            return this._opcode & 0x00FF;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "x", {\n        /** O número na segunda casa (da esquerda pra direita em hexadecimal) do opcode */\n        get: function () {\n            return (this._opcode & 0x0F00) >> 8;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "y", {\n        /** O número na terceira casa (da esquerda pra direita em hexadecimal) do opcode */\n        get: function () {\n            return (this._opcode & 0x00F0) >> 4;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "desenharFlag", {\n        get: function () {\n            return this._desenharFlag;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "tela", {\n        get: function () {\n            return this._tela;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "teclado", {\n        get: function () {\n            return this._teclado;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chip8.MEMORIA_TAMANHO = 0x1000;\n    return Chip8;\n}());\n/* harmony default export */ var src_chip8 = (Chip8);\n\n// CONCATENATED MODULE: ./src/renderizadorCanvas.ts\n/**\n * @fileoverview Define uma implementação da interface\n * IRenderizador, que renderiza em um HTMLCanvasElement\n * @author Roberto Nazareth Guedes\n */\nvar RenderizadorCanvas = /** @class */ (function () {\n    function RenderizadorCanvas(ctx) {\n        this.PIXEL_TAMANHO = 8;\n        this._ctx = ctx;\n        this._largura = this.PIXEL_TAMANHO * 64;\n        this._altura = this.PIXEL_TAMANHO * 32;\n    }\n    RenderizadorCanvas.prototype.mudarCor = function (cor) {\n        this._ctx.fillStyle = cor;\n    };\n    RenderizadorCanvas.prototype.desenharQuadrado = function (x, y, l, a) {\n        this._ctx.fillRect(x, y, l, a);\n    };\n    RenderizadorCanvas.prototype.limparTela = function () {\n        this._ctx.clearRect(0, 0, this._largura, this._altura);\n    };\n    return RenderizadorCanvas;\n}());\n/* harmony default export */ var renderizadorCanvas = (RenderizadorCanvas);\n\n// CONCATENATED MODULE: ./src/renderizador.ts\n/**\n * @fileoverview Define uma interface para o renderizador, e também\n * uma função para renderizar os dados da tela da máquina virtual\n * @author Roberto Nazareth Guedes\n */\nfunction renderizar(render, tela) {\n    render.limparTela();\n    for (var y = 0; y < 32; ++y) {\n        for (var x = 0; x < 64; ++x) {\n            var pixel = tela[y][x];\n            if (pixel !== 0) {\n                render.mudarCor(\'#ff0000\');\n            }\n            else {\n                render.mudarCor(\'#000000\');\n            }\n            render.desenharQuadrado(x * 8, y * 8, 8, 8);\n        }\n    }\n}\n\n// CONCATENATED MODULE: ./src/input.ts\nvar teclas = {\n    49: 0x1,\n    50: 0x2,\n    51: 0x3,\n    52: 0xC,\n    65: 0x7,\n    67: 0xB,\n    68: 0x9,\n    69: 0x6,\n    70: 0xE,\n    81: 0x4,\n    82: 0xD,\n    83: 0x8,\n    86: 0xF,\n    87: 0x5,\n    88: 0x0,\n    90: 0xA,\n};\n/**\n * Traduz o valor de uma tecla do PC para a tecla\n * correspondente no CHIP-8\n * @param tecla_pc O valor da tecla do PC\n * @returns O valor convertido\n */\nfunction traduzirInput(tecla_pc) {\n    var tecla_chip8 = teclas[tecla_pc];\n    // se o valor não estiver no hashmap\n    if (typeof tecla_chip8 === \'undefined\' || tecla_chip8 === 0) {\n        throw new Error(\'tecla não encontrada\');\n    }\n    return tecla_chip8;\n}\n\n// CONCATENATED MODULE: ./src/main.ts\n/**\n * @author Roberto Nazareth Guedes\n */\n\n\n\n\nvar jogoCarregado = false;\nfunction enviarPrograma(chip8, arquivo) {\n    var leitor = new FileReader();\n    leitor.onload = function () {\n        if (this.result === null || typeof this.result === \'string\') {\n            throw new Error(\'Erro ao ler arquivo\');\n        }\n        if (jogoCarregado) {\n            chip8.resetar();\n        }\n        chip8.carregarPrograma(new Uint8Array(this.result));\n        jogoCarregado = true;\n        /*\n        worker.postMessage({\n            mensagem: \'carregar\',\n            rom: new Uint8Array(this.result),\n        });\n        */\n    };\n    if (arquivo instanceof Blob)\n        leitor.readAsArrayBuffer(arquivo);\n}\nfunction main() {\n    var chip8 = new src_chip8();\n    //const worker = new Worker();\n    //worker.postMessage({a: 1});\n    var canvas = document.querySelector(\'canvas#chip-8\');\n    if (canvas === null) {\n        throw new Error(\'Erro ao buscar canvas\');\n    }\n    var ctx = canvas.getContext(\'2d\');\n    if (ctx === null) {\n        throw new Error(\'Erro ao buscar contexto do canvas\');\n    }\n    var renderizador = new renderizadorCanvas(ctx);\n    /*\n    // mensagens da outra thread\n    worker.addEventListener("message", (evento: MessageEvent) => {\n        if (typeof evento.data.mensagem !== \'string\') {\n            return;\n        }\n\n        switch (evento.data.mensagem) {\n            case \'renderizar\':\n                renderizar(renderizador, evento.data.tela);\n                break;\n        }\n    });\n    */\n    var input = document.querySelector(\'input#rom-arquivo\');\n    if (input === null) {\n        console.error(\'Erro: elemento input não encontrado\');\n        return;\n    }\n    document.addEventListener("keydown", function (e) {\n        try {\n            var tecla = traduzirInput(e.keyCode);\n            /*\n            worker.postMessage({\n                mensagem: \'teclaBaixo\',\n                tecla: tecla,\n            });\n            */\n            chip8.teclaBaixo(tecla);\n        }\n        catch (e) {\n        }\n    });\n    document.addEventListener("keyup", function (e) {\n        try {\n            var tecla = traduzirInput(e.keyCode);\n            /*worker.postMessage({\n                mensagem: \'teclaCima\',\n                tecla: tecla,\n            });\n            */\n            chip8.teclaCima(tecla);\n        }\n        catch (e) {\n        }\n    });\n    try {\n        input.addEventListener(\'change\', function () {\n            if (this.files === null) {\n                window.alert(\'Erro ao ler arquivo\');\n                return;\n            }\n            enviarPrograma(chip8, this.files[0]);\n        });\n    }\n    catch (e) {\n        window.alert(e);\n        console.error(e);\n    }\n    setInterval(function () {\n        if (jogoCarregado) {\n            chip8.emularCiclo();\n            if (chip8.desenharFlag) {\n                renderizar(renderizador, chip8.tela);\n            }\n        }\n    }, 0.0001);\n}\ntry {\n    main();\n}\ncatch (e) {\n    window.alert(e);\n    console.error(e);\n}\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY2hpcDgudHM/MDgxZiIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyaXphZG9yQ2FudmFzLnRzPzQ5NmUiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmRlcml6YWRvci50cz81ODg1Iiwid2VicGFjazovLy8uL3NyYy9pbnB1dC50cz9mZjI5Iiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzP2E0Y2UiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0EsMkJBQTJCLFFBQVE7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDJCQUEyQjtBQUNsRDtBQUNBO0FBQ0EsdUJBQXVCLHdCQUF3QjtBQUMvQztBQUNBO0FBQ0EsdUJBQXVCLG9CQUFvQjtBQUMzQztBQUNBO0FBQ0EsdUJBQXVCLDBCQUEwQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsUUFBUTtBQUMvQiwyQkFBMkIsUUFBUTtBQUNuQztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMkJBQTJCO0FBQ2xEO0FBQ0E7QUFDQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0EsdUJBQXVCLFFBQVE7QUFDL0I7QUFDQTtBQUNBLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFFBQVE7QUFDL0IsMkJBQTJCLFFBQVE7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUJBQXVCO0FBQzlDLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMEJBQTBCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixhQUFhO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixhQUFhO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLENBQUM7QUFDYyxtREFBSyxFQUFDOzs7QUMxdUJyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDYyx5RUFBa0IsRUFBQzs7O0FDdkJsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLG1CQUFtQixRQUFRO0FBQzNCLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvQkE7QUFDQTtBQUNBO0FBQzRCO0FBQzBCO0FBQ1Y7QUFDSjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsU0FBSztBQUN6QjtBQUNBLDBCQUEwQixLQUFLO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0JBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsYUFBYTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx3QkFBd0IsYUFBYTtBQUNyQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsVUFBVTtBQUMxQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVvdmVydmlldyBNw6FxdWluYSB2w61ydHVhbCBkbyBDSElQLThcbiAqIEBhdXRob3IgUm9iZXJ0byBOYXphcmV0aCBHdWVkZXNcbiAqL1xudmFyIENoaXA4ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENoaXA4KCkge1xuICAgICAgICB0aGlzLl9vcGNvZGUgPSAwO1xuICAgICAgICB0aGlzLl9zcCA9IDA7XG4gICAgICAgIHRoaXMuX3BjID0gMHgyMDA7XG4gICAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgICB0aGlzLl9kZWxheVRlbXBvID0gMDtcbiAgICAgICAgdGhpcy5fc29tVGVtcG8gPSAwO1xuICAgICAgICB0aGlzLl9lc3BlcmFuZG9JbnB1dCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9lc3BlcmFuZG9SZWdpc3RyYWRvciA9IDA7XG4gICAgICAgIHRoaXMuX2Rlc2VuaGFyRmxhZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl90ZWxhID0gbmV3IEFycmF5KDMyKTtcbiAgICAgICAgdGhpcy5fbWVtb3JpYSA9IG5ldyBVaW50OEFycmF5KDB4MTAwMCk7XG4gICAgICAgIHRoaXMuX3N0YWNrID0gbmV3IFVpbnQxNkFycmF5KDE2KTtcbiAgICAgICAgdGhpcy5fdiA9IG5ldyBVaW50OEFycmF5KDE2KTtcbiAgICAgICAgdGhpcy5fdGVjbGFkbyA9IG5ldyBVaW50OEFycmF5KDE2KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMjsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLl90ZWxhW2ldID0gbmV3IEFycmF5KDY0KTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNjQ7ICsraikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RlbGFbaV1bal0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ2hpcDguTUVNT1JJQV9UQU1BTkhPOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX21lbW9yaWFbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fc3RhY2subGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0YWNrW2ldID0gMDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3YubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX3ZbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fdGVjbGFkby5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fdGVjbGFkb1tpXSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYXJyZWdhckZvbnRlKCk7XG4gICAgfVxuICAgIC8qKiBSZXNldGEgbyBlbXVsYWRvciBhbyBzZXUgZXN0YWRvIGluaWNpYWwgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUucmVzZXRhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fb3Bjb2RlID0gMDtcbiAgICAgICAgdGhpcy5fc3AgPSAwO1xuICAgICAgICB0aGlzLl9wYyA9IDB4MjAwO1xuICAgICAgICB0aGlzLl9pID0gMDtcbiAgICAgICAgdGhpcy5fZGVsYXlUZW1wbyA9IDA7XG4gICAgICAgIHRoaXMuX3NvbVRlbXBvID0gMDtcbiAgICAgICAgdGhpcy5fZXNwZXJhbmRvSW5wdXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZXNwZXJhbmRvUmVnaXN0cmFkb3IgPSAwO1xuICAgICAgICB0aGlzLl9kZXNlbmhhckZsYWcgPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMjsgKytpKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDY0OyArK2opIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90ZWxhW2ldW2pdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IENoaXA4Lk1FTU9SSUFfVEFNQU5ITzsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLl9tZW1vcmlhW2ldID0gMDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0YWNrW2ldID0gMDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX3ZbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fdGVjbGFkb1tpXSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYXJyZWdhckZvbnRlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYXJyZWdhIHVtIHByb2dyYW1hIG5hIG1lbcOzcmlhXG4gICAgICogQHBhcmFtIGJ1ZmZlciBQcm9ncmFtYSBhIHNlciBjYXJyZWdhZG8gbmEgbWVtw7NyaWFcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUuY2FycmVnYXJQcm9ncmFtYSA9IGZ1bmN0aW9uIChidWZmZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgYnVmZmVyLmZvckVhY2goZnVuY3Rpb24gKGJ5dGUsIGkpIHtcbiAgICAgICAgICAgIHZhciBwb3MgPSBpICsgMHgyMDA7XG4gICAgICAgICAgICBpZiAocG9zIDwgQ2hpcDguTUVNT1JJQV9UQU1BTkhPKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX21lbW9yaWFbcG9zXSA9IGJ5dGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqIEVtdWxhIHVtIGNpY2xvIGRhIENQVSAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5lbXVsYXJDaWNsbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMuX2VzcGVyYW5kb0lucHV0KSB7XG4gICAgICAgICAgICB0aGlzLl90ZWNsYWRvLmZvckVhY2goZnVuY3Rpb24gKHRlY2xhKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRlY2xhICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHBhcmFyIGRlIGVzcGVyYXIgaW5wdXQgc2Ugb1xuICAgICAgICAgICAgICAgICAgICAvLyB1c3XDoXJpbyBwcmVzc2lvbmFyIHVtYSB0ZWNsYVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fZXNwZXJhbmRvSW5wdXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3ZbX3RoaXMuX2VzcGVyYW5kb1JlZ2lzdHJhZG9yXSA9IHRlY2xhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnVzY2FyT3Bjb2RlKCk7XG4gICAgICAgIHRoaXMuZXhlY3V0YXJPcGNvZGUoKTtcbiAgICAgICAgaWYgKHRoaXMuX2RlbGF5VGVtcG8gPiAwKSB7XG4gICAgICAgICAgICAtLXRoaXMuX2RlbGF5VGVtcG87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3NvbVRlbXBvID4gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3NvbVRlbXBvID09PSAxKSB7XG4gICAgICAgICAgICAgICAgLy8gQkVFcFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLS10aGlzLl9zb21UZW1wbztcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqIENhcnJlZ2EgYSBmb250ZSBuYSBtZW3Ds3JpYSAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5jYXJyZWdhckZvbnRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZm9udGUgPSBbXG4gICAgICAgICAgICAweEYwLCAweDkwLCAweDkwLCAweDkwLCAweEYwLFxuICAgICAgICAgICAgMHgyMCwgMHg2MCwgMHgyMCwgMHgyMCwgMHg3MCxcbiAgICAgICAgICAgIDB4RjAsIDB4MTAsIDB4RjAsIDB4ODAsIDB4RjAsXG4gICAgICAgICAgICAweEYwLCAweDEwLCAweEYwLCAweDEwLCAweEYwLFxuICAgICAgICAgICAgMHg5MCwgMHg5MCwgMHhGMCwgMHgxMCwgMHgxMCxcbiAgICAgICAgICAgIDB4RjAsIDB4ODAsIDB4RjAsIDB4MTAsIDB4RjAsXG4gICAgICAgICAgICAweEYwLCAweDgwLCAweEYwLCAweDkwLCAweEYwLFxuICAgICAgICAgICAgMHhGMCwgMHgxMCwgMHgyMCwgMHg0MCwgMHg0MCxcbiAgICAgICAgICAgIDB4RjAsIDB4OTAsIDB4RjAsIDB4OTAsIDB4RjAsXG4gICAgICAgICAgICAweEYwLCAweDkwLCAweEYwLCAweDEwLCAweEYwLFxuICAgICAgICAgICAgMHhGMCwgMHg5MCwgMHhGMCwgMHg5MCwgMHg5MCxcbiAgICAgICAgICAgIDB4RTAsIDB4OTAsIDB4RTAsIDB4OTAsIDB4RTAsXG4gICAgICAgICAgICAweEYwLCAweDgwLCAweDgwLCAweDgwLCAweEYwLFxuICAgICAgICAgICAgMHhFMCwgMHg5MCwgMHg5MCwgMHg5MCwgMHhFMCxcbiAgICAgICAgICAgIDB4RjAsIDB4ODAsIDB4RjAsIDB4ODAsIDB4RjAsXG4gICAgICAgICAgICAweEYwLCAweDgwLCAweEYwLCAweDgwLCAweDgwLFxuICAgICAgICBdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDgwOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX21lbW9yaWFbaV0gPSBmb250ZVtpXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQnVzY2EgbyBvcGNvZGUgZGUgYWNvcmRvIGNvbSBvIGVuZGVyZcOnbyBhdHVhbCBkbyBjb250YWRvciBkZSBwcm9ncmFtYVxuICAgICAqIGUgYXRyaWJ1aSBlc3RlIHZhbG9yIHBhcmEgYSBwcm9wcmllZGFkZSBcIm9wY29kZVwiIGRhIGNwdS5cbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUuYnVzY2FyT3Bjb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBvcGNvZGVzIHRlbSAyIGJ5dGVzICgxNiBiaXRzKSwgZW50w6NvLCBwcmVjaXNhbW9zIGp1bnRhciBkb2lzIGJ5dGVzLlxuICAgICAgICAvLyBQb3IgZXhlbXBsbzogc2UgbyB2YWxvciBkbyBwcmltZWlybyBieXRlIGZvciBBMiwgZSBvIGRvIHNlZ3VuZG8gZm9yIEYwLCBcbiAgICAgICAgLy8gZW50w6NvIG8gb3Bjb2RlIHNlcsOhIEEyRjAuXG4gICAgICAgIC8vIFwibWVtb3JpYVtwY10gPDwgOFwiIGNyaWEgNCB6ZXJvcyBubyBudW1lcm8gKGVtIGJpbmFyaW8pLCBlIGRlcG9pcyBhIG9wZXJhw6fDo29cbiAgICAgICAgLy8gYml0d2lzZSBPUiBqdW50YSBvcyAyIG51bWVyb3NcbiAgICAgICAgdmFyIHByaW1laXJvID0gdGhpcy5fbWVtb3JpYVt0aGlzLl9wY107XG4gICAgICAgIHZhciBzZWd1bmRvID0gdGhpcy5fbWVtb3JpYVt0aGlzLl9wYyArIDFdO1xuICAgICAgICB0aGlzLl9vcGNvZGUgPSAocHJpbWVpcm8gPDwgOCkgfCBzZWd1bmRvO1xuICAgIH07XG4gICAgQ2hpcDgucHJvdG90eXBlLmV4ZWN1dGFyT3Bjb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuX29wY29kZSAmIDB4RjAwMCkge1xuICAgICAgICAgICAgY2FzZSAweDAwMDA6XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRhck9wXzB4eHgoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHgxMDAwOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfMW5ubl9qcCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDIwMDA6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF8ybm5uX2NhbGwoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHgzMDAwOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfM3hra19zZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDQwMDA6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF80eGtrX3NuZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDUwMDA6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF81eHkwX3NlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4NjAwMDpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzZ4a2tfbGQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHg3MDAwOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfN3hra19hZGQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHg4MDAwOlxuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0YXJPcF84eHh4KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4OTAwMDpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzl4eTBfc25lKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4QTAwMDpcbiAgICAgICAgICAgICAgICB0aGlzLm9wX2Fubm5fbGQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHhCMDAwOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfYm5ubl9qbXAoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHhDMDAwOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfY3hra19ybmQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHhEMDAwOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfZHh5bl9kcmF3KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4RTAwMDpcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGFyT3BfZXh4eCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweEYwMDA6XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRhck9wX2Z4eHgoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk9wY29kZSBkZXNjb25oZWNpZG86IFwiICsgdGhpcy5fb3Bjb2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDaGlwOC5wcm90b3R5cGUuZXhlY3V0YXJPcF8weHh4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuX29wY29kZSAmIDB4MDBGRikge1xuICAgICAgICAgICAgY2FzZSAweDAwRUU6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF8wMGVlX3JldCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwRTA6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF8wMGUwX2NscigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiT3Bjb2RlIGRlc2NvbmhlY2lkbzogXCIgKyB0aGlzLl9vcGNvZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENoaXA4LnByb3RvdHlwZS5leGVjdXRhck9wXzh4eHggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5fb3Bjb2RlICYgMHgwMDBGKSB7XG4gICAgICAgICAgICBjYXNlIDB4MDAwMDpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzh4eTBfbGQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHgwMDAxOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfOHh5MV9vcigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwMDI6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF84eHkyX2FuZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwMDM6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF84eHkzX3hvcigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwMDQ6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF84eHk0X2FkZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwMDU6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF84eHk1X3N1YigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwMDY6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF84eDA2X3NocigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwMDc6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF84eHk3X3N1Ym4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHgwMDBFOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfOHgwZV9zaGwoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk9wY29kZSBkZXNjb25oZWNpZG86IFwiICsgdGhpcy5fb3Bjb2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDaGlwOC5wcm90b3R5cGUuZXhlY3V0YXJPcF9leHh4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuX29wY29kZSAmIDB4MDBGRikge1xuICAgICAgICAgICAgY2FzZSAweDAwOUU6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF9leDllX3NrcCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwQTE6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF9leGExX3NrbnAoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk9wY29kZSBkZXNjb25oZWNpZG86IFwiICsgdGhpcy5fb3Bjb2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDaGlwOC5wcm90b3R5cGUuZXhlY3V0YXJPcF9meHh4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuX29wY29kZSAmIDB4MDBGRikge1xuICAgICAgICAgICAgY2FzZSAweDAwMDc6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF9meDA3X2xkKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDAwQTpcbiAgICAgICAgICAgICAgICB0aGlzLm9wX2Z4MGFfbGQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHgwMDE1OlxuICAgICAgICAgICAgICAgIHRoaXMub3BfZngxNV9sZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwMTg6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF9meDE4X2xkKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDAxRTpcbiAgICAgICAgICAgICAgICB0aGlzLm9wX2Z4MWVfYWRkKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDAyOTpcbiAgICAgICAgICAgICAgICB0aGlzLm9wX2Z4MjlfbGQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHgwMDMzOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfZngzM19sZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwNTU6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF9meDU1X2xkKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDA2NTpcbiAgICAgICAgICAgICAgICB0aGlzLm9wX2Z4NjVfbGQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk9wY29kZSBkZXNjb25oZWNpZG86IFwiICsgdGhpcy5fb3Bjb2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDTFJcbiAgICAgKiBMaW1wYSBhIHRlbGFcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfMDBlMF9jbHIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzI7ICsraSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA2NDsgKytqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdGVsYVtpXVtqXSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGVzZW5oYXJGbGFnID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE9wY29kZSAwMEVFLCByZXR1cm5hIGRlIHVtYSBzdWJyb3RpbmFcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfMDBlZV9yZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3BjID0gdGhpcy5fc3RhY2tbdGhpcy5fc3AgLSAxXTtcbiAgICAgICAgdGhpcy5fc3AgLT0gMTtcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEpQIGVuZGVyZWNvXG4gICAgICogT3Bjb2RlIDFubm46IHB1bGEgbyBwcm9ncmFtYSBwYXJhIHVtIGVuZGVyZcOnbywgb25kZSBubm4gw6kgbyBlbmRlcmXDp29cbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfMW5ubl9qcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fcGMgPSB0aGlzLm5ubjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE9wY29kZSAybm5uOiBwdWxhIG8gcHJvZ3JhbWEgcGFyYSB1bWEgc3Vicm90aW5hLCBvbmRlIG5ubiDDqSBvIGVuZGVyZcOnbyBkYSBzdWJyb3RpbmEuXG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wXzJubm5fY2FsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gZ3VhcmRhIG8gZW5kZXJlw6dvIGF0dWFsIGRvIHByb2dyYW1hIG5hIHN0YWNrXG4gICAgICAgIHRoaXMuX3N0YWNrW3RoaXMuX3NwXSA9IHRoaXMuX3BjO1xuICAgICAgICB0aGlzLl9zcCArPSAxO1xuICAgICAgICB0aGlzLl9wYyA9IHRoaXMubm5uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogT3Bjb2RlIDN4a2s6IHB1bGEgYSBwcm94aW1hIGluc3RydcOnw6NvIHNlIGtrIGZvciBpZ3VhbCBhIFZ4XG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wXzN4a2tfc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl92W3RoaXMueF0gPT09IHRoaXMua2spIHtcbiAgICAgICAgICAgIHRoaXMuX3BjICs9IDQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBPcGNvZGUgNHhrazogcHVsYSBhIHByb3hpbWEgaW5zdHJ1w6fDo28gc2Uga2sgZm9yIGRpZmVyZW50ZSBkZSBWeFxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF80eGtrX3NuZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3ZbdGhpcy54XSAhPT0gdGhpcy5raykge1xuICAgICAgICAgICAgdGhpcy5fcGMgKz0gNDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE9wY29kZSA1eHkwOiBwdWxhIGEgcHJveGltYSBpbnN0cnXDp8OjbyBzZSBWeCBmb3IgaWd1YWwgYSBWeVxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF81eHkwX3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fdlt0aGlzLnhdID09PSB0aGlzLl92W3RoaXMueV0pIHtcbiAgICAgICAgICAgIHRoaXMuX3BjICs9IDQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMRCBWeCwgYnl0ZVxuICAgICAqIE9wY29kZSA2eGtrOiBndWFyZGEgbyB2YWxvciBrayBlbSBWeFxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF82eGtrX2xkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl92W3RoaXMueF0gPSB0aGlzLmtrO1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQUREIFZ4LCBieXRlXG4gICAgICogT3Bjb2RlIDd4a2s6IGFkaWNpb25hIG8gdmFsb3Iga2sgYW8gcmVnaXN0cmFkb3IgVnhcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfN3hra19hZGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3ZbdGhpcy54XSArPSB0aGlzLmtrO1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTEQgVngsIFZ5XG4gICAgICogb3Bjb2RlIDh4eTA6IHNhbHZhIG8gdmFsb3IgZGUgVnkgbm8gcmVnaXN0cmFkb3IgVnhcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfOHh5MF9sZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdlt0aGlzLnhdID0gdGhpcy5fdlt0aGlzLnldO1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogT1IgVngsIFZ5XG4gICAgICogb3Bjb2RlIDh4eTE6IHBlcmZvcm1hIHVtYSB1bWEgb3BlcmHDp8OjbyBiaXR3aXNlIE9SXG4gICAgICogbm9zIHZhbG9yZXMgZGUgVnggZSBWeSwgZSBzYWx2YSBvIHJlc3VsdGFkbyBub1xuICAgICAqIHJlZ2lzdHJhZG9yIFZ4XG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wXzh4eTFfb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3ZbdGhpcy54XSB8PSB0aGlzLl92W3RoaXMueV07XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBTkQgVngsIFZ5XG4gICAgICogb3Bjb2RlIDh4eTI6IHBlcmZvcm1hIHVtYSB1bWEgb3BlcmHDp8OjbyBiaXR3aXNlIEFORFxuICAgICAqIG5vcyB2YWxvcmVzIGRlIFZ4IGUgVnksIGUgc2FsdmEgbyByZXN1bHRhZG8gbm9cbiAgICAgKiByZWdpc3RyYWRvciBWeFxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF84eHkyX2FuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdlt0aGlzLnhdICY9IHRoaXMuX3ZbdGhpcy55XTtcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICogWE9SIFZ4LCBWeVxuICAgICogb3Bjb2RlIDh4eTM6IHBlcmZvcm1hIHVtYSB1bWEgb3BlcmHDp8OjbyBiaXR3aXNlIFhPUiAoT1IgZXhjbHVzaXZvKVxuICAgICogbm9zIHZhbG9yZXMgZGUgVnggZSBWeSwgZSBzYWx2YSBvIHJlc3VsdGFkbyBub1xuICAgICogcmVnaXN0cmFkb3IgVnhcbiAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF84eHkzX3hvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdlt0aGlzLnhdIF49IHRoaXMuX3ZbdGhpcy55XTtcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFERCBWeCwgVnlcbiAgICAgKiBvcGNvZGUgOHh5NDogYWRpY2lvbmEgbyB2YWxvciBkZSBWeSBhIFZ4IGUgYXRpdmEgYSBjYXJyeSBmbGFnXG4gICAgICogZG8gcmVnaXN0cmFkb3IgVkYgY2FzbyBvIHJlc3VsdGFkbyBzZWphIG1haW9yIGRvIHF1ZSAyNTVcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfOHh5NF9hZGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3ZbdGhpcy54XSArPSB0aGlzLl92W3RoaXMueV07XG4gICAgICAgIHRoaXMuX3ZbMHhGXSA9ICsodGhpcy5fdlt0aGlzLnhdID4gMjU1KTtcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNVQiBWeCwgVnlcbiAgICAgKiBvcGNvZGUgOHh5NTogc3VidHJhaSBWeCBwb3IgVnkgZSBndWFyZGEgbyByZXN1bHRhZG8gZW0gVnguXG4gICAgICogQ2FzbyBWeCBzZWphIG1haW9yIHF1ZSBWeSwgVkYgw6kgaWd1YWwgYSAxLCBlIGNhc28gbyBjb250cmFyaW9cbiAgICAgKiDDqSBpZ3VhbCBhIDBcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfOHh5NV9zdWIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3ZbMHhGXSA9ICsodGhpcy5fdlt0aGlzLnhdID4gdGhpcy5fdlt0aGlzLnldKTtcbiAgICAgICAgdGhpcy5fdlt0aGlzLnhdIC09IHRoaXMuX3ZbdGhpcy55XTtcbiAgICAgICAgLypcbiAgICAgICAgaWYgKHRoaXMuX3ZbdGhpcy54XSA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuX3ZbdGhpcy54XSArPSAyNTY7XG4gICAgICAgIH1cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNIUiBWeFxuICAgICAqIG9wY29kZSA4eDA2OiBkZXNsb2NhIG8gbsO6bWVybyB1bWEgY2FzYSAoZW0gYmluw6FyaW8pIHBhcmEgYSBkaXJlaXRhIChyaWdodCBzaGlmdCkuXG4gICAgICogTyBiaXQgbWVub3Mgc2lnbmlmaWNhdGl2byBkbyB2YWxvciBvcmlnaW5hbCBkZSBWeCDDqSBzYWx2byBub1xuICAgICAqIHJlZ2lzdHJhZG9yIFZGXG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wXzh4MDZfc2hyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdnggPSB0aGlzLl92W3RoaXMueF07XG4gICAgICAgIHRoaXMuX3ZbMHhGXSA9IDB4MSAmIHZ4O1xuICAgICAgICB0aGlzLl92W3RoaXMueF0gPSB2eCA+PiAxO1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU1VCTiBWeCwgVnlcbiAgICAgKiBvcGNvZGUgOHh5Nzogc3VidHJhaSBWeSBwb3IgVnggZSBndWFyZGEgbyByZXN1bHRhZG8gZW0gVnguXG4gICAgICogQ2FzbyBWeCBzZWphIG1haW9yIHF1ZSBWeSwgVkYgw6kgaWd1YWwgYSAxLCBlIGNhc28gbyBjb250cmFyaW9cbiAgICAgKiDDqSBpZ3VhbCBhIDBcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfOHh5N19zdWJuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdnggPSB0aGlzLl92W3RoaXMueF07XG4gICAgICAgIHZhciB2eSA9IHRoaXMuX3ZbdGhpcy55XTtcbiAgICAgICAgdGhpcy5fdlsweEZdID0gdnkgPiB2eCA/IDEgOiAwO1xuICAgICAgICB0aGlzLl92W3RoaXMueF0gPSB2eSAtIHZ4O1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU0hMIFZ4XG4gICAgICogb3Bjb2RlIDh4MEU6IGRlc2xvY2EgbyBuw7ptZXJvIHVtYSBjYXNhIChlbSBiaW7DoXJpbykgcGFyYSBhIGVzcXVlcmRhIChsZWZ0IHNoaWZ0KS5cbiAgICAgKiBPIGJpdCBtYWlzIHNpZ25pZmljYXRpdm8gZG8gdmFsb3Igb3JpZ2luYWwgZGUgVnggw6kgc2Fsdm8gbm9cbiAgICAgKiByZWdpc3RyYWRvciBWRlxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF84eDBlX3NobCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZ4ID0gdGhpcy5fdlt0aGlzLnhdO1xuICAgICAgICAvKlxuICAgICAgICB0aGlzLl92WzB4Rl0gPSArKHRoaXMuX3ZbdGhpcy54XSAmIDB4ODApO1xuICAgICAgICB0aGlzLl92W3RoaXMueF0gPDw9IDE7XG4gICAgICAgICovXG4gICAgICAgIHRoaXMuX3ZbMHhGXSA9IHZ4ID4+IDc7XG4gICAgICAgIHRoaXMuX3ZbdGhpcy54XSA9IHZ4IDw8IDE7XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTTkUgVngsIFZ5XG4gICAgICogUHVsYSBhIHByb3hpbWEgaW5zdHJ1w6fDo28gc2UgVnggZm9yIGRpZmVyZW50ZSBkZSBWeVxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF85eHkwX3NuZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3ZbdGhpcy54XSAhPT0gdGhpcy5fdlt0aGlzLnldKSB7XG4gICAgICAgICAgICB0aGlzLl9wYyArPSA0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSk1QIFYwLCBlbmRlcmVjb1xuICAgICAqIFB1bGEgcGFyYSBvIGVuZGVyZcOnbyBubm4gKyBWMFxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF9hbm5uX2xkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9pID0gdGhpcy5ubm47XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBKTVAgVjAsIGVuZGVyZWNvXG4gICAgICogUHVsYSBwYXJhIG8gZW5kZXJlw6dvIG5ubiArIFYwXG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wX2Jubm5fam1wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9wYyA9IHRoaXMuX3ZbdGhpcy54XSArIHRoaXMubm5uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUk5EIFZ4LCBieXRlXG4gICAgICogVnggPSBieXRlIGFsZWF0w7NyaW8gJiBra1xuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF9jeGtrX3JuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJ5dGVfYWxlYXRvcmlvID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMHhGRikgJiAodGhpcy5fb3Bjb2RlICYgMHhGRik7XG4gICAgICAgIHRoaXMuX3ZbdGhpcy54XSA9IGJ5dGVfYWxlYXRvcmlvICYgdGhpcy5raztcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIENoaXA4LnByb3RvdHlwZS5zZXRQaXhlbCA9IGZ1bmN0aW9uIChwb3NfeCwgcG9zX3ksIGZpbV9zcHJpdGUpIHtcbiAgICAgICAgdmFyIGNvbGlzYW8gPSAwO1xuICAgICAgICB2YXIgc3ByaXRlID0gdGhpcy5fbWVtb3JpYS5zbGljZSh0aGlzLl9pLCBmaW1fc3ByaXRlICsgMSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3ByaXRlLmxlbmd0aCAtIDE7ICsraSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyArK2opIHtcbiAgICAgICAgICAgICAgICB2YXIgeCA9IChwb3NfeCArIGopICUgNjQ7XG4gICAgICAgICAgICAgICAgdmFyIHkgPSAocG9zX3kgKyBpKSAlIDMyO1xuICAgICAgICAgICAgICAgIGlmICgoc3ByaXRlW2ldICYgKDB4ODAgPj4gaikpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl90ZWxhW3ldW3hdID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xpc2FvID0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90ZWxhW3ldW3hdIF49IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Rlc2VuaGFyRmxhZyA9IHRydWU7XG4gICAgICAgIHJldHVybiBjb2xpc2FvO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGVzZW5oYSB1bSBzcHJpdGUgbmEgY29vcmRlbmFkYSAoVngsIFZ5KSwgY29tIDggcGl4ZWxzIGRlIGxhcmd1cmEgZSBOIGRlIGFsdHVyYVxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF9keHluX2RyYXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBuID0gdGhpcy5fb3Bjb2RlICYgMHgwMDBGO1xuICAgICAgICB2YXIgZmltX3Nwcml0ZSA9IHRoaXMuX2kgKyBuO1xuICAgICAgICB0aGlzLl92WzB4Rl0gPSB0aGlzLnNldFBpeGVsKHRoaXMuX3ZbdGhpcy54XSwgdGhpcy5fdlt0aGlzLnldLCBmaW1fc3ByaXRlKTtcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNLUCBWeFxuICAgICAqIHB1bGEgYSBwcsOzeGltYSBpbnN0cnXDp8OjbyBzZSBhIHRlY2xhIGNvbSBvIHZhbG9yIGRlIFZ4IGVzdGl2ZXIgc2VuZG8gcHJlc3Npb25hZGFcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfZXg5ZV9za3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ZWNsYSA9IHRoaXMuX3ZbdGhpcy54XTtcbiAgICAgICAgaWYgKHRoaXMuX3RlY2xhZG9bdGVjbGFdICE9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9wYyArPSA0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU0tOUCBWeFxuICAgICAqIHB1bGEgYSBwcsOzeGltYSBpbnN0cnXDp8OjbyBzZSBhIHRlY2xhIGNvbSBvIHZhbG9yIGRlIFZ4IG7Do28gZXN0aXZlciBzZW5kbyBwcmVzc2lvbmFkYVxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF9leGExX3NrbnAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ZWNsYSA9IHRoaXMuX3ZbdGhpcy54XTtcbiAgICAgICAgaWYgKHRoaXMuX3RlY2xhZG9bdGVjbGFdID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9wYyArPSA0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogTEQgVngsIEtcbiAgICAgKiBFc3BlcmEgbyB1c3XDoXJpbyBwcmVzc2lvbmFyIHVtYSB0ZWNsYSwgZSBhdHJpYnVpIG8gdmFsb3IgYSBWeFxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF9meDBhX2xkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvL3RoaXMuX2VzcGVyYW5kb1JlZ2lzdHJhZG9yID0gdGhpcy54O1xuICAgICAgICB0aGlzLl9lc3BlcmFuZG9JbnB1dCA9IHRydWU7XG4gICAgICAgIHRoaXMuX2VzcGVyYW5kb1JlZ2lzdHJhZG9yID0gdGhpcy54O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3RlY2xhZG8ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX3RlY2xhZG9baV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMRCBWeCwgREVMQVlfVElNRVJcbiAgICAgKiBBdHJpYnVpIG8gdmFsb3IgZG8gdGVtcG9yaXphZG9yIGRlIGRlbGF5IGFvIFZ4XG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wX2Z4MDdfbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3ZbdGhpcy54XSA9IHRoaXMuX2RlbGF5VGVtcG87XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMRCBERUxBWV9USU1FUiwgVnhcbiAgICAgKiBBdHJpYnVpIG8gdmFsb3IgZGUgVnggYW8gdGVtcG9yaXphZG9yIGRlIGRlbGF5XG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wX2Z4MTVfbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2RlbGF5VGVtcG8gPSB0aGlzLl92W3RoaXMueF07XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMRCBTT1VORF9USU1FUiwgVnhcbiAgICAgKiBBdHJpYnVpIG8gdmFsb3IgZGUgVnggYW8gdGVtcG9yaXphZG9yIGRlIHNvbVxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF9meDE4X2xkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9zb21UZW1wbyA9IHRoaXMuX3ZbdGhpcy54XTtcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFERCBJLCBWeFxuICAgICAqIEkgPSBJICsgVnhcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfZngxZV9hZGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2kgKz0gdGhpcy5fdlt0aGlzLnhdO1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTEQgRiwgVnhcbiAgICAgKiBBdHJpYnVpIGFvIEkgbyBlbmRlcmXDp28gZG8gc3ByaXRlIGNvcnJlc3BvbmRlbnRlIMOgIFZ4XG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wX2Z4MjlfbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2kgPSB0aGlzLnggKiA1O1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTEQgQiwgVnhcbiAgICAgKiBvcGNvZGUgRngzMzogR3VhcmRhIGEgcmVwcmVzZW50YcOnw6NvIGVtIGNvZGlmaWNhw6fDo28gYmluw6FyaWEgZGVjaW1hbCAoQkNEKVxuICAgICAqIGRvIHZhbG9yIGRvIHJlZ2lzdHJhZG9yIFZ4LiBPIGRpZ2l0byBuYSBjYXNhIGRhcyBjZW50ZW5hcyBzZXLDoSBzYWx2byBub1xuICAgICAqIGVuZGVyZcOnbyBcImlcIiAobyByZWdpc3RyYWRvciBkZSBpbmRleCksIGEgY2FzYSBkYXMgZGV6ZW5hcyBzZXLDoSBzYWx2YSBub1xuICAgICAqIGVuZGVyZcOnbyBcImkgKyAxXCIsIGUgbyBkaWdpdG8gZGEgY2FzYSBkYXMgdW5pZGFkZXMgZXLDoSBzYWx2byBlbSBcImkgKyAyXCJcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfZngzM19sZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbG9yID0gdGhpcy5fdlt0aGlzLnhdO1xuICAgICAgICB0aGlzLl9tZW1vcmlhW3RoaXMuX2ldID0gdmFsb3IgLyAxMDA7XG4gICAgICAgIHRoaXMuX21lbW9yaWFbdGhpcy5faSArIDFdID0gKHZhbG9yIC8gMTApICUgMTA7XG4gICAgICAgIHRoaXMuX21lbW9yaWFbdGhpcy5faSArIDJdID0gKHZhbG9yICUgMTAwKSAlIDEwO1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTEQgW0ldLCBWeFxuICAgICAqIEd1YXJkYSBvcyB2YWxvcmVzIGRlIFYwIMOgIFZ4IG5hIG1lbcOzcmlhIGEgcGFydGlyIGRvIGVuZGVyZcOnbyBJXG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wX2Z4NTVfbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHRoaXMueDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9tZW1vcmlhW2kgKyB0aGlzLl9pXSA9IHRoaXMuX3ZbaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExEIFZ4LCBbSV1cbiAgICAgKiBQcmVlbmNoZSBvcyByZWdpc3RyYWRvcmVzIGRlIFYwIMOgIFZ4IGNvbSB2YWxvcmVzIG5hIG1lbcOzcmlhIGEgcGFydGlyIGRvIGVuZGVyZcOnbyBJXG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wX2Z4NjVfbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHRoaXMueDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl92W2ldID0gdGhpcy5fbWVtb3JpYVtpICsgdGhpcy5faV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKiBSZWdpc3RyYSBxdWUgdW1hIHRlY2xhIGZvaSBhcGVydGFkYSAqL1xuICAgIENoaXA4LnByb3RvdHlwZS50ZWNsYUJhaXhvID0gZnVuY3Rpb24gKHRlY2xhKSB7XG4gICAgICAgIHRoaXMuX3RlY2xhZG9bdGVjbGFdID0gMTtcbiAgICB9O1xuICAgIC8qKiBSZWdpc3RyYSBxdWUgdW1hIHRlY2xhIGZvaSBzb2x0YSAqL1xuICAgIENoaXA4LnByb3RvdHlwZS50ZWNsYUNpbWEgPSBmdW5jdGlvbiAodGVjbGEpIHtcbiAgICAgICAgdGhpcy5fdGVjbGFkb1t0ZWNsYV0gPSAwO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENoaXA4LnByb3RvdHlwZSwgXCJ2XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENoaXA4LnByb3RvdHlwZSwgXCJvcGNvZGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vcGNvZGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGlwOC5wcm90b3R5cGUsIFwibm5uXCIsIHtcbiAgICAgICAgLyoqIEFzIDMgw7psdGltYXMgY2FzYXMgKGVtIGhleGFkZWNpbWFsKSBkbyBvcGNvZGUgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3Bjb2RlICYgMHgwRkZGO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2hpcDgucHJvdG90eXBlLCBcImtrXCIsIHtcbiAgICAgICAgLyoqIEFzIDIgw7psdGltYXMgY2FzYXMgKGVtIGhleGFkZWNpbWFsKSBkbyBvcGNvZGUgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3Bjb2RlICYgMHgwMEZGO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2hpcDgucHJvdG90eXBlLCBcInhcIiwge1xuICAgICAgICAvKiogTyBuw7ptZXJvIG5hIHNlZ3VuZGEgY2FzYSAoZGEgZXNxdWVyZGEgcHJhIGRpcmVpdGEgZW0gaGV4YWRlY2ltYWwpIGRvIG9wY29kZSAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5fb3Bjb2RlICYgMHgwRjAwKSA+PiA4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2hpcDgucHJvdG90eXBlLCBcInlcIiwge1xuICAgICAgICAvKiogTyBuw7ptZXJvIG5hIHRlcmNlaXJhIGNhc2EgKGRhIGVzcXVlcmRhIHByYSBkaXJlaXRhIGVtIGhleGFkZWNpbWFsKSBkbyBvcGNvZGUgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuX29wY29kZSAmIDB4MDBGMCkgPj4gNDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENoaXA4LnByb3RvdHlwZSwgXCJkZXNlbmhhckZsYWdcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZXNlbmhhckZsYWc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGlwOC5wcm90b3R5cGUsIFwidGVsYVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RlbGE7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGlwOC5wcm90b3R5cGUsIFwidGVjbGFkb1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RlY2xhZG87XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIENoaXA4Lk1FTU9SSUFfVEFNQU5ITyA9IDB4MTAwMDtcbiAgICByZXR1cm4gQ2hpcDg7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgQ2hpcDg7XG4iLCIvKipcbiAqIEBmaWxlb3ZlcnZpZXcgRGVmaW5lIHVtYSBpbXBsZW1lbnRhw6fDo28gZGEgaW50ZXJmYWNlXG4gKiBJUmVuZGVyaXphZG9yLCBxdWUgcmVuZGVyaXphIGVtIHVtIEhUTUxDYW52YXNFbGVtZW50XG4gKiBAYXV0aG9yIFJvYmVydG8gTmF6YXJldGggR3VlZGVzXG4gKi9cbnZhciBSZW5kZXJpemFkb3JDYW52YXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVuZGVyaXphZG9yQ2FudmFzKGN0eCkge1xuICAgICAgICB0aGlzLlBJWEVMX1RBTUFOSE8gPSA4O1xuICAgICAgICB0aGlzLl9jdHggPSBjdHg7XG4gICAgICAgIHRoaXMuX2xhcmd1cmEgPSB0aGlzLlBJWEVMX1RBTUFOSE8gKiA2NDtcbiAgICAgICAgdGhpcy5fYWx0dXJhID0gdGhpcy5QSVhFTF9UQU1BTkhPICogMzI7XG4gICAgfVxuICAgIFJlbmRlcml6YWRvckNhbnZhcy5wcm90b3R5cGUubXVkYXJDb3IgPSBmdW5jdGlvbiAoY29yKSB7XG4gICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSBjb3I7XG4gICAgfTtcbiAgICBSZW5kZXJpemFkb3JDYW52YXMucHJvdG90eXBlLmRlc2VuaGFyUXVhZHJhZG8gPSBmdW5jdGlvbiAoeCwgeSwgbCwgYSkge1xuICAgICAgICB0aGlzLl9jdHguZmlsbFJlY3QoeCwgeSwgbCwgYSk7XG4gICAgfTtcbiAgICBSZW5kZXJpemFkb3JDYW52YXMucHJvdG90eXBlLmxpbXBhclRlbGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2N0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5fbGFyZ3VyYSwgdGhpcy5fYWx0dXJhKTtcbiAgICB9O1xuICAgIHJldHVybiBSZW5kZXJpemFkb3JDYW52YXM7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgUmVuZGVyaXphZG9yQ2FudmFzO1xuIiwiLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IERlZmluZSB1bWEgaW50ZXJmYWNlIHBhcmEgbyByZW5kZXJpemFkb3IsIGUgdGFtYsOpbVxuICogdW1hIGZ1bsOnw6NvIHBhcmEgcmVuZGVyaXphciBvcyBkYWRvcyBkYSB0ZWxhIGRhIG3DoXF1aW5hIHZpcnR1YWxcbiAqIEBhdXRob3IgUm9iZXJ0byBOYXphcmV0aCBHdWVkZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcml6YXIocmVuZGVyLCB0ZWxhKSB7XG4gICAgcmVuZGVyLmxpbXBhclRlbGEoKTtcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8IDMyOyArK3kpIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCA2NDsgKyt4KSB7XG4gICAgICAgICAgICB2YXIgcGl4ZWwgPSB0ZWxhW3ldW3hdO1xuICAgICAgICAgICAgaWYgKHBpeGVsICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyLm11ZGFyQ29yKCcjZmYwMDAwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZW5kZXIubXVkYXJDb3IoJyMwMDAwMDAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbmRlci5kZXNlbmhhclF1YWRyYWRvKHggKiA4LCB5ICogOCwgOCwgOCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJ2YXIgdGVjbGFzID0ge1xuICAgIDQ5OiAweDEsXG4gICAgNTA6IDB4MixcbiAgICA1MTogMHgzLFxuICAgIDUyOiAweEMsXG4gICAgNjU6IDB4NyxcbiAgICA2NzogMHhCLFxuICAgIDY4OiAweDksXG4gICAgNjk6IDB4NixcbiAgICA3MDogMHhFLFxuICAgIDgxOiAweDQsXG4gICAgODI6IDB4RCxcbiAgICA4MzogMHg4LFxuICAgIDg2OiAweEYsXG4gICAgODc6IDB4NSxcbiAgICA4ODogMHgwLFxuICAgIDkwOiAweEEsXG59O1xuLyoqXG4gKiBUcmFkdXogbyB2YWxvciBkZSB1bWEgdGVjbGEgZG8gUEMgcGFyYSBhIHRlY2xhXG4gKiBjb3JyZXNwb25kZW50ZSBubyBDSElQLThcbiAqIEBwYXJhbSB0ZWNsYV9wYyBPIHZhbG9yIGRhIHRlY2xhIGRvIFBDXG4gKiBAcmV0dXJucyBPIHZhbG9yIGNvbnZlcnRpZG9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYWR1emlySW5wdXQodGVjbGFfcGMpIHtcbiAgICB2YXIgdGVjbGFfY2hpcDggPSB0ZWNsYXNbdGVjbGFfcGNdO1xuICAgIC8vIHNlIG8gdmFsb3IgbsOjbyBlc3RpdmVyIG5vIGhhc2htYXBcbiAgICBpZiAodHlwZW9mIHRlY2xhX2NoaXA4ID09PSAndW5kZWZpbmVkJyB8fCB0ZWNsYV9jaGlwOCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RlY2xhIG7Do28gZW5jb250cmFkYScpO1xuICAgIH1cbiAgICByZXR1cm4gdGVjbGFfY2hpcDg7XG59XG4iLCIvKipcbiAqIEBhdXRob3IgUm9iZXJ0byBOYXphcmV0aCBHdWVkZXNcbiAqL1xuaW1wb3J0IENoaXA4IGZyb20gJy4vY2hpcDgnO1xuaW1wb3J0IFJlbmRlcml6YWRvckNhbnZhcyBmcm9tICcuL3JlbmRlcml6YWRvckNhbnZhcyc7XG5pbXBvcnQgeyByZW5kZXJpemFyIH0gZnJvbSAnLi9yZW5kZXJpemFkb3InO1xuaW1wb3J0IHsgdHJhZHV6aXJJbnB1dCB9IGZyb20gJy4vaW5wdXQnO1xudmFyIGpvZ29DYXJyZWdhZG8gPSBmYWxzZTtcbmZ1bmN0aW9uIGVudmlhclByb2dyYW1hKGNoaXA4LCBhcnF1aXZvKSB7XG4gICAgdmFyIGxlaXRvciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgbGVpdG9yLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0ID09PSBudWxsIHx8IHR5cGVvZiB0aGlzLnJlc3VsdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJybyBhbyBsZXIgYXJxdWl2bycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChqb2dvQ2FycmVnYWRvKSB7XG4gICAgICAgICAgICBjaGlwOC5yZXNldGFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2hpcDguY2FycmVnYXJQcm9ncmFtYShuZXcgVWludDhBcnJheSh0aGlzLnJlc3VsdCkpO1xuICAgICAgICBqb2dvQ2FycmVnYWRvID0gdHJ1ZTtcbiAgICAgICAgLypcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIG1lbnNhZ2VtOiAnY2FycmVnYXInLFxuICAgICAgICAgICAgcm9tOiBuZXcgVWludDhBcnJheSh0aGlzLnJlc3VsdCksXG4gICAgICAgIH0pO1xuICAgICAgICAqL1xuICAgIH07XG4gICAgaWYgKGFycXVpdm8gaW5zdGFuY2VvZiBCbG9iKVxuICAgICAgICBsZWl0b3IucmVhZEFzQXJyYXlCdWZmZXIoYXJxdWl2byk7XG59XG5mdW5jdGlvbiBtYWluKCkge1xuICAgIHZhciBjaGlwOCA9IG5ldyBDaGlwOCgpO1xuICAgIC8vY29uc3Qgd29ya2VyID0gbmV3IFdvcmtlcigpO1xuICAgIC8vd29ya2VyLnBvc3RNZXNzYWdlKHthOiAxfSk7XG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcyNjaGlwLTgnKTtcbiAgICBpZiAoY2FudmFzID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXJybyBhbyBidXNjYXIgY2FudmFzJyk7XG4gICAgfVxuICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBpZiAoY3R4ID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXJybyBhbyBidXNjYXIgY29udGV4dG8gZG8gY2FudmFzJyk7XG4gICAgfVxuICAgIHZhciByZW5kZXJpemFkb3IgPSBuZXcgUmVuZGVyaXphZG9yQ2FudmFzKGN0eCk7XG4gICAgLypcbiAgICAvLyBtZW5zYWdlbnMgZGEgb3V0cmEgdGhyZWFkXG4gICAgd29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIChldmVudG86IE1lc3NhZ2VFdmVudCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGV2ZW50by5kYXRhLm1lbnNhZ2VtICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChldmVudG8uZGF0YS5tZW5zYWdlbSkge1xuICAgICAgICAgICAgY2FzZSAncmVuZGVyaXphcic6XG4gICAgICAgICAgICAgICAgcmVuZGVyaXphcihyZW5kZXJpemFkb3IsIGV2ZW50by5kYXRhLnRlbGEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgKi9cbiAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dCNyb20tYXJxdWl2bycpO1xuICAgIGlmIChpbnB1dCA9PT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvOiBlbGVtZW50byBpbnB1dCBuw6NvIGVuY29udHJhZG8nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHRlY2xhID0gdHJhZHV6aXJJbnB1dChlLmtleUNvZGUpO1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgbWVuc2FnZW06ICd0ZWNsYUJhaXhvJyxcbiAgICAgICAgICAgICAgICB0ZWNsYTogdGVjbGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBjaGlwOC50ZWNsYUJhaXhvKHRlY2xhKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgdGVjbGEgPSB0cmFkdXppcklucHV0KGUua2V5Q29kZSk7XG4gICAgICAgICAgICAvKndvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgbWVuc2FnZW06ICd0ZWNsYUNpbWEnLFxuICAgICAgICAgICAgICAgIHRlY2xhOiB0ZWNsYSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNoaXA4LnRlY2xhQ2ltYSh0ZWNsYSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbGVzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KCdFcnJvIGFvIGxlciBhcnF1aXZvJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZW52aWFyUHJvZ3JhbWEoY2hpcDgsIHRoaXMuZmlsZXNbMF0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgd2luZG93LmFsZXJ0KGUpO1xuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChqb2dvQ2FycmVnYWRvKSB7XG4gICAgICAgICAgICBjaGlwOC5lbXVsYXJDaWNsbygpO1xuICAgICAgICAgICAgaWYgKGNoaXA4LmRlc2VuaGFyRmxhZykge1xuICAgICAgICAgICAgICAgIHJlbmRlcml6YXIocmVuZGVyaXphZG9yLCBjaGlwOC50ZWxhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIDAuMDAwMSk7XG59XG50cnkge1xuICAgIG1haW4oKTtcbn1cbmNhdGNoIChlKSB7XG4gICAgd2luZG93LmFsZXJ0KGUpO1xuICAgIGNvbnNvbGUuZXJyb3IoZSk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n')}]);