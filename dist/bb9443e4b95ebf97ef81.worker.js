!function(C){var A={};function B(g){if(A[g])return A[g].exports;var I=A[g]={i:g,l:!1,exports:{}};return C[g].call(I.exports,I,I.exports,B),I.l=!0,I.exports}B.m=C,B.c=A,B.d=function(g,I,C){B.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:C})},B.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},B.t=function(I,g){if(1&g&&(I=B(I)),8&g)return I;if(4&g&&"object"==typeof I&&I&&I.__esModule)return I;var C=Object.create(null);if(B.r(C),Object.defineProperty(C,"default",{enumerable:!0,value:I}),2&g&&"string"!=typeof I)for(var A in I)B.d(C,A,function(g){return I[g]}.bind(null,A));return C},B.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return B.d(I,"a",I),I},B.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},B.p="/dist/",B(B.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/renderizadorCanvas.ts\nvar RenderizadorCanvas = /** @class */ (function () {\n    function RenderizadorCanvas(query) {\n        this.PIXEL_TAMANHO = 8;\n        var canvas = document.querySelector(query);\n        if (canvas === null) {\n            throw new Error(\'Erro ao buscar canvas\');\n        }\n        var ctx = canvas.getContext(\'2d\');\n        if (ctx === null) {\n            throw new Error(\'Erro ao buscar contexto do canvas\');\n        }\n        this._ctx = ctx;\n        this._largura = this.PIXEL_TAMANHO * 64;\n        this._altura = this.PIXEL_TAMANHO * 32;\n    }\n    RenderizadorCanvas.prototype.mudarCor = function (cor) {\n        this._ctx.fillStyle = cor;\n    };\n    RenderizadorCanvas.prototype.desenharQuadrado = function (x, y, l, a) {\n        this._ctx.fillRect(x, y, l, a);\n    };\n    RenderizadorCanvas.prototype.limparTela = function () {\n        this._ctx.clearRect(0, 0, this._largura, this._altura);\n    };\n    return RenderizadorCanvas;\n}());\n/* harmony default export */ var renderizadorCanvas = (RenderizadorCanvas);\n\n// CONCATENATED MODULE: ./src/chip8.ts\nvar Chip8 = /** @class */ (function () {\n    function Chip8(renderizador) {\n        this._opcode = 0;\n        this._sp = 0;\n        this._pc = 0x200;\n        this._i = 0;\n        this._delayTempo = 0;\n        this._somTempo = 0;\n        this._esperandoInput = false;\n        this._esperandoRegistrador = 0;\n        this._desenharFlag = false;\n        this._tela = new Array(32);\n        this._memoria = new Uint8Array(0x1000);\n        this._stack = new Uint16Array(16);\n        this._v = new Uint8Array(16);\n        this._teclado = new Uint8Array(16);\n        this._renderizador = renderizador;\n        for (var i = 0; i < 32; ++i) {\n            this._tela[i] = new Array(64);\n            for (var j = 0; j < 64; ++j) {\n                this._tela[i][j] = 0;\n            }\n        }\n        for (var i = 0; i < Chip8.MEMORIA_TAMANHO; ++i) {\n            this._memoria[i] = 0;\n        }\n        for (var i = 0; i < this._stack.length; ++i) {\n            this._stack[i] = 0;\n        }\n        for (var i = 0; i < this._v.length; ++i) {\n            this._v[i] = 0;\n        }\n        for (var i = 0; i < this._teclado.length; ++i) {\n            this._teclado[i] = 0;\n        }\n        this.carregarFonte();\n    }\n    ;\n    ;\n    /** Reseta o emulador ao seu estado inicial */\n    Chip8.prototype.resetar = function () {\n        this._opcode = 0;\n        this._sp = 0;\n        this._pc = 0x200;\n        this._i = 0;\n        this._delayTempo = 0;\n        this._somTempo = 0;\n        this._esperandoInput = false;\n        this._esperandoRegistrador = 0;\n        this._desenharFlag = false;\n        for (var i = 0; i < 32; ++i) {\n            for (var j = 0; j < 64; ++j) {\n                this._tela[i][j] = 0;\n            }\n        }\n        for (var i = 0; i < Chip8.MEMORIA_TAMANHO; ++i) {\n            this._memoria[i] = 0;\n        }\n        for (var i = 0; i < 16; ++i) {\n            this._stack[i] = 0;\n        }\n        for (var i = 0; i < 16; ++i) {\n            this._v[i] = 0;\n        }\n        for (var i = 0; i < 16; ++i) {\n            this._teclado[i] = 0;\n        }\n        this.carregarFonte();\n    };\n    /**\n     * Carrega um programa na memória\n     * @param buffer Programa a ser carregado na memória\n     */\n    Chip8.prototype.carregarPrograma = function (buffer) {\n        var _this = this;\n        buffer.forEach(function (byte, i) {\n            var pos = i + 0x200;\n            if (pos < Chip8.MEMORIA_TAMANHO) {\n                _this._memoria[pos] = byte;\n            }\n        });\n    };\n    /** Emula um ciclo da CPU */\n    Chip8.prototype.emularCiclo = function () {\n        this.buscarOpcode();\n        this.executarOpcode();\n        if (this._delayTempo > 0) {\n            --this._delayTempo;\n        }\n        if (this._somTempo > 0) {\n            if (this._somTempo === 1) {\n                console.log("BEEP");\n            }\n            --this._somTempo;\n        }\n    };\n    Chip8.prototype.renderizar = function () {\n        if (!this._desenharFlag) {\n            return;\n        }\n        this._renderizador.limparTela();\n        for (var y = 0; y < 32; ++y) {\n            for (var x = 0; x < 64; ++x) {\n                var pixel = this._tela[y][x];\n                if (pixel !== 0) {\n                    this._renderizador.mudarCor(\'#ff0000\');\n                }\n                else {\n                    this._renderizador.mudarCor(\'#000000\');\n                }\n                this._renderizador.desenharQuadrado(x * 8, y * 8, 8, 8);\n            }\n        }\n    };\n    Chip8.prototype.carregarFonte = function () {\n        var fonte = [\n            0xF0, 0x90, 0x90, 0x90, 0xF0,\n            0x20, 0x60, 0x20, 0x20, 0x70,\n            0xF0, 0x10, 0xF0, 0x80, 0xF0,\n            0xF0, 0x10, 0xF0, 0x10, 0xF0,\n            0x90, 0x90, 0xF0, 0x10, 0x10,\n            0xF0, 0x80, 0xF0, 0x10, 0xF0,\n            0xF0, 0x80, 0xF0, 0x90, 0xF0,\n            0xF0, 0x10, 0x20, 0x40, 0x40,\n            0xF0, 0x90, 0xF0, 0x90, 0xF0,\n            0xF0, 0x90, 0xF0, 0x10, 0xF0,\n            0xF0, 0x90, 0xF0, 0x90, 0x90,\n            0xE0, 0x90, 0xE0, 0x90, 0xE0,\n            0xF0, 0x80, 0x80, 0x80, 0xF0,\n            0xE0, 0x90, 0x90, 0x90, 0xE0,\n            0xF0, 0x80, 0xF0, 0x80, 0xF0,\n            0xF0, 0x80, 0xF0, 0x80, 0x80,\n        ];\n        for (var i = 0; i < 80; ++i) {\n            this._memoria[i] = fonte[i];\n        }\n    };\n    /**\n     * Busca o opcode de acordo com o endereço atual do contador de programa\n     * e atribui este valor para a propriedade "opcode" da cpu.\n     */\n    Chip8.prototype.buscarOpcode = function () {\n        // opcodes tem 2 bytes (16 bits), então, precisamos juntar dois bytes.\n        // Por exemplo: se o valor do primeiro byte for A2, e o do segundo for F0, \n        // então o opcode será A2F0.\n        // "memoria[pc] << 8" cria 4 zeros no numero (em binario), e depois a operação\n        // bitwise OR junta os 2 numeros\n        var primeiro = this._memoria[this._pc];\n        var segundo = this._memoria[this._pc + 1];\n        this._opcode = (primeiro << 8) | segundo;\n    };\n    Chip8.prototype.executarOpcode = function () {\n        switch (this._opcode & 0xF000) {\n            case 0x0000:\n                this.executarOp_0xxx();\n                break;\n            case 0x1000:\n                this.op_1nnn_jp();\n                break;\n            case 0x2000:\n                this.op_2nnn_call();\n                break;\n            case 0x3000:\n                this.op_3xkk_se();\n                break;\n            case 0x4000:\n                this.op_4xkk_sne();\n                break;\n            case 0x5000:\n                this.op_5xy0_se();\n                break;\n            case 0x6000:\n                this.op_6xkk_ld();\n                break;\n            case 0x7000:\n                this.op_7xkk_add();\n                break;\n            case 0x8000:\n                this.executarOp_8xxx();\n                break;\n            case 0x9000:\n                this.op_9xy0_sne();\n                break;\n            case 0xA000:\n                this.op_annn_ld();\n                break;\n            case 0xB000:\n                this.op_bnnn_jmp();\n                break;\n            case 0xC000:\n                this.op_cxkk_rnd();\n                break;\n            case 0xD000:\n                this.op_dxyn_draw();\n                break;\n            case 0xE000:\n                this.executarOp_exxx();\n                break;\n            case 0xF000:\n                this.executarOp_fxxx();\n                break;\n            default:\n                console.error("Opcode desconhecido: " + this._opcode);\n                this._pc += 2;\n                break;\n        }\n    };\n    Chip8.prototype.executarOp_0xxx = function () {\n        switch (this._opcode & 0x00FF) {\n            case 0x00EE:\n                this.op_00ee_ret();\n                break;\n            case 0x00E0:\n                this.op_00e0_clr();\n                break;\n            default:\n                console.error("Opcode desconhecido: " + this._opcode);\n                this._pc += 2;\n                break;\n        }\n    };\n    Chip8.prototype.executarOp_8xxx = function () {\n        switch (this._opcode & 0x000F) {\n            case 0x0000:\n                this.op_8xy0_ld();\n                break;\n            case 0x0001:\n                this.op_8xy1_or();\n                break;\n            case 0x0002:\n                this.op_8xy2_and();\n                break;\n            case 0x0003:\n                this.op_8xy3_xor();\n                break;\n            case 0x0004:\n                this.op_8xy4_add();\n                break;\n            case 0x0005:\n                this.op_8xy5_sub();\n                break;\n            case 0x0006:\n                this.op_8x06_shr();\n                break;\n            case 0x0007:\n                this.op_8xy7_subn();\n                break;\n            case 0x000E:\n                this.op_8x0e_shl();\n                break;\n            default:\n                console.error("Opcode desconhecido: " + this._opcode);\n                this._pc += 2;\n                break;\n        }\n    };\n    Chip8.prototype.executarOp_exxx = function () {\n        switch (this._opcode & 0x00FF) {\n            case 0x009E:\n                this.op_ex9e_skp();\n                break;\n            case 0x00A1:\n                this.op_exa1_sknp();\n                break;\n            default:\n                console.error("Opcode desconhecido: " + this._opcode);\n                this._pc += 2;\n                break;\n        }\n    };\n    Chip8.prototype.executarOp_fxxx = function () {\n        switch (this._opcode & 0x00FF) {\n            case 0x0007:\n                this.op_fx07_ld();\n                break;\n            case 0x000A:\n                this.op_fx0a_ld();\n                break;\n            case 0x0015:\n                this.op_fx15_ld();\n                break;\n            case 0x0018:\n                this.op_fx18_ld();\n                break;\n            case 0x001E:\n                this.op_fx1e_add();\n                break;\n            case 0x0029:\n                this.op_fx29_ld();\n                break;\n            case 0x0033:\n                this.op_fx33_ld();\n                break;\n            case 0x0055:\n                this.op_fx55_ld();\n                break;\n            case 0x0065:\n                this.op_fx65_ld();\n                break;\n            default:\n                console.error("Opcode desconhecido: " + this._opcode);\n                this._pc += 2;\n                break;\n        }\n    };\n    /**\n     * CLR\n     * Limpa a tela\n     */\n    Chip8.prototype.op_00e0_clr = function () {\n        for (var i = 0; i < 32; ++i) {\n            for (var j = 0; j < 64; ++j) {\n                this._tela[i][j] = 0;\n            }\n        }\n        this._desenharFlag = true;\n        this._pc += 2;\n    };\n    /**\n     * Opcode 00EE, returna de uma subrotina\n     */\n    Chip8.prototype.op_00ee_ret = function () {\n        this._pc = this._stack[this._sp - 1];\n        this._sp -= 1;\n        this._pc += 2;\n    };\n    /**\n     * JP endereco\n     * Opcode 1nnn: pula o programa para um endereço, onde nnn é o endereço\n     */\n    Chip8.prototype.op_1nnn_jp = function () {\n        this._pc = this.nnn;\n    };\n    /**\n     * Opcode 2nnn: pula o programa para uma subrotina, onde nnn é o endereço da subrotina.\n     */\n    Chip8.prototype.op_2nnn_call = function () {\n        // guarda o endereço atual do programa na stack\n        this._stack[this._sp] = this._pc;\n        this._sp += 1;\n        this._pc = this.nnn;\n    };\n    /**\n     * Opcode 3xkk: pula a proxima instrução se kk for igual a Vx\n     */\n    Chip8.prototype.op_3xkk_se = function () {\n        if (this._v[this.x] === this.kk) {\n            this._pc += 4;\n        }\n        else {\n            this._pc += 2;\n        }\n    };\n    /**\n     * Opcode 4xkk: pula a proxima instrução se kk for diferente de Vx\n     */\n    Chip8.prototype.op_4xkk_sne = function () {\n        if (this._v[this.x] !== this.kk) {\n            this._pc += 4;\n        }\n        else {\n            this._pc += 2;\n        }\n    };\n    /**\n     * Opcode 5xy0: pula a proxima instrução se Vx for igual a Vy\n     */\n    Chip8.prototype.op_5xy0_se = function () {\n        if (this._v[this.x] === this._v[this.y]) {\n            this._pc += 4;\n        }\n        else {\n            this._pc += 2;\n        }\n    };\n    /**\n     * LD Vx, byte\n     * Opcode 6xkk: guarda o valor kk em Vx\n     */\n    Chip8.prototype.op_6xkk_ld = function () {\n        this._v[this.x] = this.kk;\n        this._pc += 2;\n    };\n    /**\n     * ADD Vx, byte\n     * Opcode 7xkk: adiciona o valor kk ao registrador Vx\n     */\n    Chip8.prototype.op_7xkk_add = function () {\n        this._v[this.x] += this.kk;\n        this._pc += 2;\n    };\n    /**\n     * LD Vx, Vy\n     * opcode 8xy0: salva o valor de Vy no registrador Vx\n     */\n    Chip8.prototype.op_8xy0_ld = function () {\n        this._v[this.x] = this._v[this.y];\n        this._pc += 2;\n    };\n    /**\n     * OR Vx, Vy\n     * opcode 8xy1: performa uma uma operação bitwise OR\n     * nos valores de Vx e Vy, e salva o resultado no\n     * registrador Vx\n     */\n    Chip8.prototype.op_8xy1_or = function () {\n        this._v[this.x] |= this._v[this.y];\n        this._pc += 2;\n    };\n    /**\n     * AND Vx, Vy\n     * opcode 8xy2: performa uma uma operação bitwise AND\n     * nos valores de Vx e Vy, e salva o resultado no\n     * registrador Vx\n     */\n    Chip8.prototype.op_8xy2_and = function () {\n        this._v[this.x] &= this._v[this.y];\n        this._pc += 2;\n    };\n    /**\n    * XOR Vx, Vy\n    * opcode 8xy3: performa uma uma operação bitwise XOR (OR exclusivo)\n    * nos valores de Vx e Vy, e salva o resultado no\n    * registrador Vx\n    */\n    Chip8.prototype.op_8xy3_xor = function () {\n        this._v[this.x] ^= this._v[this.y];\n        this._pc += 2;\n    };\n    /**\n     * ADD Vx, Vy\n     * opcode 8xy4: adiciona o valor de Vy a Vx e ativa a carry flag\n     * do registrador VF caso o resultado seja maior do que 255\n     */\n    Chip8.prototype.op_8xy4_add = function () {\n        this._v[this.x] += this._v[this.y];\n        this._v[0xF] = +(this._v[this.x] > 255);\n        /*\n        if (this._v[this.x] > 255) {\n            this._v[this.x] -= 256;\n        }\n        */\n        this._pc += 2;\n    };\n    /**\n     * SUB Vx, Vy\n     * opcode 8xy5: subtrai Vx por Vy e guarda o resultado em Vx.\n     * Caso Vx seja maior que Vy, VF é igual a 1, e caso o contrario\n     * é igual a 0\n     */\n    Chip8.prototype.op_8xy5_sub = function () {\n        this._v[0xF] = +(this._v[this.x] > this._v[this.y]);\n        this._v[this.x] -= this._v[this.y];\n        /*\n        if (this._v[this.x] < 0) {\n            this._v[this.x] += 256;\n        }\n        */\n        this._pc += 2;\n    };\n    /**\n     * SHR Vx\n     * opcode 8x06: desloca o número uma casa (em binário) para a direita (right shift).\n     * O bit menos significativo do valor original de Vx é salvo no\n     * registrador VF\n     */\n    Chip8.prototype.op_8x06_shr = function () {\n        var vx = this._v[this.x];\n        this._v[0xF] = 0x1 & vx;\n        this._v[this.x] = vx >> 1;\n        this._pc += 2;\n    };\n    /**\n     * SUBN Vx, Vy\n     * opcode 8xy7: subtrai Vy por Vx e guarda o resultado em Vx.\n     * Caso Vx seja maior que Vy, VF é igual a 1, e caso o contrario\n     * é igual a 0\n     */\n    Chip8.prototype.op_8xy7_subn = function () {\n        var vx = this._v[this.x];\n        var vy = this._v[this.y];\n        this._v[0xF] = vy > vx ? 1 : 0;\n        this._v[this.x] = vy - vx;\n        this._pc += 2;\n    };\n    /**\n     * SHL Vx\n     * opcode 8x0E: desloca o número uma casa (em binário) para a esquerda (left shift).\n     * O bit mais significativo do valor original de Vx é salvo no\n     * registrador VF\n     */\n    Chip8.prototype.op_8x0e_shl = function () {\n        var vx = this._v[this.x];\n        /*\n        this._v[0xF] = +(this._v[this.x] & 0x80);\n        this._v[this.x] <<= 1;\n        */\n        this._v[0xF] = vx >> 7;\n        this._v[this.x] = vx << 1;\n        this._pc += 2;\n    };\n    /**\n     * SNE Vx, Vy\n     * Pula a proxima instrução se Vx for diferente de Vy\n     */\n    Chip8.prototype.op_9xy0_sne = function () {\n        if (this._v[this.x] !== this._v[this.y]) {\n            this._pc += 4;\n        }\n        else {\n            this._pc += 2;\n        }\n    };\n    /**\n     * JMP V0, endereco\n     * Pula para o endereço nnn + V0\n     */\n    Chip8.prototype.op_annn_ld = function () {\n        this._i = this.nnn;\n        this._pc += 2;\n    };\n    /**\n     * JMP V0, endereco\n     * Pula para o endereço nnn + V0\n     */\n    Chip8.prototype.op_bnnn_jmp = function () {\n        this._pc = this._v[this.x] + this.nnn;\n    };\n    /**\n     * RND Vx, byte\n     * Vx = byte aleatório & kk\n     */\n    Chip8.prototype.op_cxkk_rnd = function () {\n        var byte_aleatorio = Math.floor(Math.random() * 0xFF) & (this._opcode & 0xFF);\n        this._v[this.x] = byte_aleatorio & this.kk;\n        this._pc += 2;\n    };\n    Chip8.prototype.setPixel = function (pos_x, pos_y, fim_sprite) {\n        var colisao = 0;\n        var sprite = this._memoria.slice(this._i, fim_sprite + 1);\n        for (var i = 0; i < sprite.length - 1; ++i) {\n            for (var j = 0; j < 8; ++j) {\n                var x = (pos_x + j) % 64;\n                var y = (pos_y + i) % 32;\n                if ((sprite[i] & (0x80 >> j)) !== 0) {\n                    if (this._tela[y][x] === 1) {\n                        colisao = 1;\n                    }\n                    this._tela[y][x] ^= 1;\n                }\n            }\n        }\n        this._desenharFlag = true;\n        return colisao;\n    };\n    /**\n     * Desenha um sprite na coordenada (Vx, Vy), com 8 pixels de largura e N de altura\n     */\n    Chip8.prototype.op_dxyn_draw = function () {\n        var n = this._opcode & 0x000F;\n        var fim_sprite = this._i + n;\n        this._v[0xF] = this.setPixel(this._v[this.x], this._v[this.y], fim_sprite);\n        this._pc += 2;\n    };\n    /**\n     * SKP Vx\n     * pula a próxima instrução se a tecla com o valor de Vx estiver sendo pressionada\n     */\n    Chip8.prototype.op_ex9e_skp = function () {\n        var tecla = this._v[this.x];\n        if (this._teclado[tecla] !== 0) {\n            this._pc += 4;\n        }\n        else {\n            this._pc += 2;\n        }\n    };\n    /**\n     * SKNP Vx\n     * pula a próxima instrução se a tecla com o valor de Vx não estiver sendo pressionada\n     */\n    Chip8.prototype.op_exa1_sknp = function () {\n        var tecla = this._v[this.x];\n        if (this._teclado[tecla] === 0) {\n            this._pc += 4;\n        }\n        else {\n            this._pc += 2;\n        }\n    };\n    /**\n     * LD Vx, K\n     * Espera o usuário pressionar uma tecla, e atribui o valor a Vx\n     */\n    Chip8.prototype.op_fx0a_ld = function () {\n        this._esperandoRegistrador = this.x;\n        this._esperandoInput = true;\n        this._pc += 2;\n    };\n    /**\n     * LD Vx, DELAY_TIMER\n     * Atribui o valor do temporizador de delay ao Vx\n     */\n    Chip8.prototype.op_fx07_ld = function () {\n        this._v[this.x] = this._delayTempo;\n        this._pc += 2;\n    };\n    /**\n     * LD DELAY_TIMER, Vx\n     * Atribui o valor de Vx ao temporizador de delay\n     */\n    Chip8.prototype.op_fx15_ld = function () {\n        this._delayTempo = this._v[this.x];\n        this._pc += 2;\n    };\n    /**\n     * LD SOUND_TIMER, Vx\n     * Atribui o valor de Vx ao temporizador de som\n     */\n    Chip8.prototype.op_fx18_ld = function () {\n        this._somTempo = this._v[this.x];\n        this._pc += 2;\n    };\n    /**\n     * ADD I, Vx\n     * I = I + Vx\n     */\n    Chip8.prototype.op_fx1e_add = function () {\n        this._i += this._v[this.x];\n        this._pc += 2;\n    };\n    /**\n     * LD F, Vx\n     * Atribui ao I o endereço do sprite correspondente à Vx\n     */\n    Chip8.prototype.op_fx29_ld = function () {\n        this._i = this.x * 5;\n        this._pc += 2;\n    };\n    /**\n     * LD B, Vx\n     * opcode Fx33: Guarda a representação em codificação binária decimal (BCD)\n     * do valor do registrador Vx. O digito na casa das centenas será salvo no\n     * endereço "i" (o registrador de index), a casa das dezenas será salva no\n     * endereço "i + 1", e o digito da casa das unidades erá salvo em "i + 2"\n     */\n    Chip8.prototype.op_fx33_ld = function () {\n        var valor = this._v[this.x];\n        this._memoria[this._i] = valor / 100;\n        this._memoria[this._i + 1] = (valor / 10) % 10;\n        this._memoria[this._i + 2] = (valor % 100) % 10;\n        this._pc += 2;\n    };\n    /**\n     * LD [I], Vx\n     * Guarda os valores de V0 à Vx na memória a partir do endereço I\n     */\n    Chip8.prototype.op_fx55_ld = function () {\n        for (var i = 0; i <= this.x; i++) {\n            this._memoria[i + this._i] = this._v[i];\n        }\n        this._pc += 2;\n    };\n    /**\n     * LD Vx, [I]\n     * Preenche os registradores de V0 à Vx com valores na memória a partir do endereço I\n     */\n    Chip8.prototype.op_fx65_ld = function () {\n        for (var i = 0; i <= this.x; i++) {\n            this._v[i] = this._memoria[i + this._i];\n        }\n        this._pc += 2;\n    };\n    Object.defineProperty(Chip8.prototype, "v", {\n        get: function () {\n            return this._v;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "opcode", {\n        get: function () {\n            return this._opcode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "nnn", {\n        /** As 3 últimas casas (em hexadecimal) do opcode */\n        get: function () {\n            return this._opcode & 0x0FFF;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "kk", {\n        /** As 2 últimas casas (em hexadecimal) do opcode */\n        get: function () {\n            return this._opcode & 0x00FF;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "x", {\n        /** O número na segunda casa (da esquerda pra direita em hexadecimal) do opcode */\n        get: function () {\n            return (this._opcode & 0x0F00) >> 8;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "y", {\n        /** O número na terceira casa (da esquerda pra direita em hexadecimal) do opcode */\n        get: function () {\n            return (this._opcode & 0x00F0) >> 4;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chip8.prototype, "desenharFlag", {\n        get: function () {\n            return this._desenharFlag;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chip8.MEMORIA_TAMANHO = 0x1000;\n    return Chip8;\n}());\n/* harmony default export */ var chip8 = (Chip8);\n\n// CONCATENATED MODULE: ./node_modules/ts-loader??ref--6!./src/worker.ts\n\n\n;\nvar ctx = self;\nvar render = new renderizadorCanvas(\'canvas#chip-8\');\nvar worker_chip8 = new chip8(render);\nvar jogoCarregado = false;\nvar atualizarFrame = function () {\n    if (jogoCarregado) {\n        worker_chip8.emularCiclo();\n        worker_chip8.renderizar();\n    }\n    window.requestAnimationFrame(atualizarFrame);\n};\nwindow.requestAnimationFrame(atualizarFrame);\nctx.onmessage = function (evento) {\n    var dados = evento.data;\n    if (dados.mensagem === \'carregar\') {\n        if (!(dados.rom instanceof Uint8Array)) {\n            window.alert(\'Erro ao ler arquivo\');\n            return;\n        }\n        if (dados.resetar) {\n            worker_chip8.resetar();\n        }\n        worker_chip8.carregarPrograma(dados.rom);\n        jogoCarregado = true;\n    }\n};\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyaXphZG9yQ2FudmFzLnRzPzQ5NmUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoaXA4LnRzPzA4MWYiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dvcmtlci50cz8wMzY3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNjLHlFQUFrQixFQUFDOzs7QUMxQmxDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBLDJCQUEyQixRQUFRO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwyQkFBMkI7QUFDbEQ7QUFDQTtBQUNBLHVCQUF1Qix3QkFBd0I7QUFDL0M7QUFDQTtBQUNBLHVCQUF1QixvQkFBb0I7QUFDM0M7QUFDQTtBQUNBLHVCQUF1QiwwQkFBMEI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixRQUFRO0FBQy9CLDJCQUEyQixRQUFRO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwyQkFBMkI7QUFDbEQ7QUFDQTtBQUNBLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0EsdUJBQXVCLFFBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsUUFBUTtBQUMvQiwyQkFBMkIsUUFBUTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFFBQVE7QUFDL0IsMkJBQTJCLFFBQVE7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVCQUF1QjtBQUM5QywyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGFBQWE7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGFBQWE7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxDQUFDO0FBQ2MsK0NBQUssRUFBQzs7O0FDenRCaUM7QUFDMUI7QUFDNUI7QUFDQTtBQUNBLGlCQUFpQixrQkFBa0I7QUFDbkMsSUFBSSxZQUFLLE9BQU8sS0FBSztBQUNyQjtBQUNBO0FBQ0E7QUFDQSxRQUFRLFlBQUs7QUFDYixRQUFRLFlBQUs7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFlBQUs7QUFDakI7QUFDQSxRQUFRLFlBQUs7QUFDYjtBQUNBO0FBQ0EiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBSZW5kZXJpemFkb3JDYW52YXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVuZGVyaXphZG9yQ2FudmFzKHF1ZXJ5KSB7XG4gICAgICAgIHRoaXMuUElYRUxfVEFNQU5ITyA9IDg7XG4gICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHF1ZXJ5KTtcbiAgICAgICAgaWYgKGNhbnZhcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvIGFvIGJ1c2NhciBjYW52YXMnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGlmIChjdHggPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJybyBhbyBidXNjYXIgY29udGV4dG8gZG8gY2FudmFzJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY3R4ID0gY3R4O1xuICAgICAgICB0aGlzLl9sYXJndXJhID0gdGhpcy5QSVhFTF9UQU1BTkhPICogNjQ7XG4gICAgICAgIHRoaXMuX2FsdHVyYSA9IHRoaXMuUElYRUxfVEFNQU5ITyAqIDMyO1xuICAgIH1cbiAgICBSZW5kZXJpemFkb3JDYW52YXMucHJvdG90eXBlLm11ZGFyQ29yID0gZnVuY3Rpb24gKGNvcikge1xuICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gY29yO1xuICAgIH07XG4gICAgUmVuZGVyaXphZG9yQ2FudmFzLnByb3RvdHlwZS5kZXNlbmhhclF1YWRyYWRvID0gZnVuY3Rpb24gKHgsIHksIGwsIGEpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxSZWN0KHgsIHksIGwsIGEpO1xuICAgIH07XG4gICAgUmVuZGVyaXphZG9yQ2FudmFzLnByb3RvdHlwZS5saW1wYXJUZWxhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuX2xhcmd1cmEsIHRoaXMuX2FsdHVyYSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVuZGVyaXphZG9yQ2FudmFzO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFJlbmRlcml6YWRvckNhbnZhcztcbiIsInZhciBDaGlwOCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDaGlwOChyZW5kZXJpemFkb3IpIHtcbiAgICAgICAgdGhpcy5fb3Bjb2RlID0gMDtcbiAgICAgICAgdGhpcy5fc3AgPSAwO1xuICAgICAgICB0aGlzLl9wYyA9IDB4MjAwO1xuICAgICAgICB0aGlzLl9pID0gMDtcbiAgICAgICAgdGhpcy5fZGVsYXlUZW1wbyA9IDA7XG4gICAgICAgIHRoaXMuX3NvbVRlbXBvID0gMDtcbiAgICAgICAgdGhpcy5fZXNwZXJhbmRvSW5wdXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZXNwZXJhbmRvUmVnaXN0cmFkb3IgPSAwO1xuICAgICAgICB0aGlzLl9kZXNlbmhhckZsYWcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fdGVsYSA9IG5ldyBBcnJheSgzMik7XG4gICAgICAgIHRoaXMuX21lbW9yaWEgPSBuZXcgVWludDhBcnJheSgweDEwMDApO1xuICAgICAgICB0aGlzLl9zdGFjayA9IG5ldyBVaW50MTZBcnJheSgxNik7XG4gICAgICAgIHRoaXMuX3YgPSBuZXcgVWludDhBcnJheSgxNik7XG4gICAgICAgIHRoaXMuX3RlY2xhZG8gPSBuZXcgVWludDhBcnJheSgxNik7XG4gICAgICAgIHRoaXMuX3JlbmRlcml6YWRvciA9IHJlbmRlcml6YWRvcjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMjsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLl90ZWxhW2ldID0gbmV3IEFycmF5KDY0KTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNjQ7ICsraikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RlbGFbaV1bal0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ2hpcDguTUVNT1JJQV9UQU1BTkhPOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX21lbW9yaWFbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fc3RhY2subGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0YWNrW2ldID0gMDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3YubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX3ZbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fdGVjbGFkby5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fdGVjbGFkb1tpXSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYXJyZWdhckZvbnRlKCk7XG4gICAgfVxuICAgIDtcbiAgICA7XG4gICAgLyoqIFJlc2V0YSBvIGVtdWxhZG9yIGFvIHNldSBlc3RhZG8gaW5pY2lhbCAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5yZXNldGFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9vcGNvZGUgPSAwO1xuICAgICAgICB0aGlzLl9zcCA9IDA7XG4gICAgICAgIHRoaXMuX3BjID0gMHgyMDA7XG4gICAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgICB0aGlzLl9kZWxheVRlbXBvID0gMDtcbiAgICAgICAgdGhpcy5fc29tVGVtcG8gPSAwO1xuICAgICAgICB0aGlzLl9lc3BlcmFuZG9JbnB1dCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9lc3BlcmFuZG9SZWdpc3RyYWRvciA9IDA7XG4gICAgICAgIHRoaXMuX2Rlc2VuaGFyRmxhZyA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDMyOyArK2kpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNjQ7ICsraikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RlbGFbaV1bal0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ2hpcDguTUVNT1JJQV9UQU1BTkhPOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuX21lbW9yaWFbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fc3RhY2tbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fdltpXSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLl90ZWNsYWRvW2ldID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhcnJlZ2FyRm9udGUoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhcnJlZ2EgdW0gcHJvZ3JhbWEgbmEgbWVtw7NyaWFcbiAgICAgKiBAcGFyYW0gYnVmZmVyIFByb2dyYW1hIGEgc2VyIGNhcnJlZ2FkbyBuYSBtZW3Ds3JpYVxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5jYXJyZWdhclByb2dyYW1hID0gZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBidWZmZXIuZm9yRWFjaChmdW5jdGlvbiAoYnl0ZSwgaSkge1xuICAgICAgICAgICAgdmFyIHBvcyA9IGkgKyAweDIwMDtcbiAgICAgICAgICAgIGlmIChwb3MgPCBDaGlwOC5NRU1PUklBX1RBTUFOSE8pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fbWVtb3JpYVtwb3NdID0gYnl0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKiogRW11bGEgdW0gY2ljbG8gZGEgQ1BVICovXG4gICAgQ2hpcDgucHJvdG90eXBlLmVtdWxhckNpY2xvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmJ1c2Nhck9wY29kZSgpO1xuICAgICAgICB0aGlzLmV4ZWN1dGFyT3Bjb2RlKCk7XG4gICAgICAgIGlmICh0aGlzLl9kZWxheVRlbXBvID4gMCkge1xuICAgICAgICAgICAgLS10aGlzLl9kZWxheVRlbXBvO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9zb21UZW1wbyA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zb21UZW1wbyA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQkVFUFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC0tdGhpcy5fc29tVGVtcG87XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENoaXA4LnByb3RvdHlwZS5yZW5kZXJpemFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2Rlc2VuaGFyRmxhZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3JlbmRlcml6YWRvci5saW1wYXJUZWxhKCk7XG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgMzI7ICsreSkge1xuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCA2NDsgKyt4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gdGhpcy5fdGVsYVt5XVt4XTtcbiAgICAgICAgICAgICAgICBpZiAocGl4ZWwgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyaXphZG9yLm11ZGFyQ29yKCcjZmYwMDAwJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJpemFkb3IubXVkYXJDb3IoJyMwMDAwMDAnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyaXphZG9yLmRlc2VuaGFyUXVhZHJhZG8oeCAqIDgsIHkgKiA4LCA4LCA4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2hpcDgucHJvdG90eXBlLmNhcnJlZ2FyRm9udGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmb250ZSA9IFtcbiAgICAgICAgICAgIDB4RjAsIDB4OTAsIDB4OTAsIDB4OTAsIDB4RjAsXG4gICAgICAgICAgICAweDIwLCAweDYwLCAweDIwLCAweDIwLCAweDcwLFxuICAgICAgICAgICAgMHhGMCwgMHgxMCwgMHhGMCwgMHg4MCwgMHhGMCxcbiAgICAgICAgICAgIDB4RjAsIDB4MTAsIDB4RjAsIDB4MTAsIDB4RjAsXG4gICAgICAgICAgICAweDkwLCAweDkwLCAweEYwLCAweDEwLCAweDEwLFxuICAgICAgICAgICAgMHhGMCwgMHg4MCwgMHhGMCwgMHgxMCwgMHhGMCxcbiAgICAgICAgICAgIDB4RjAsIDB4ODAsIDB4RjAsIDB4OTAsIDB4RjAsXG4gICAgICAgICAgICAweEYwLCAweDEwLCAweDIwLCAweDQwLCAweDQwLFxuICAgICAgICAgICAgMHhGMCwgMHg5MCwgMHhGMCwgMHg5MCwgMHhGMCxcbiAgICAgICAgICAgIDB4RjAsIDB4OTAsIDB4RjAsIDB4MTAsIDB4RjAsXG4gICAgICAgICAgICAweEYwLCAweDkwLCAweEYwLCAweDkwLCAweDkwLFxuICAgICAgICAgICAgMHhFMCwgMHg5MCwgMHhFMCwgMHg5MCwgMHhFMCxcbiAgICAgICAgICAgIDB4RjAsIDB4ODAsIDB4ODAsIDB4ODAsIDB4RjAsXG4gICAgICAgICAgICAweEUwLCAweDkwLCAweDkwLCAweDkwLCAweEUwLFxuICAgICAgICAgICAgMHhGMCwgMHg4MCwgMHhGMCwgMHg4MCwgMHhGMCxcbiAgICAgICAgICAgIDB4RjAsIDB4ODAsIDB4RjAsIDB4ODAsIDB4ODAsXG4gICAgICAgIF07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgODA7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5fbWVtb3JpYVtpXSA9IGZvbnRlW2ldO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBCdXNjYSBvIG9wY29kZSBkZSBhY29yZG8gY29tIG8gZW5kZXJlw6dvIGF0dWFsIGRvIGNvbnRhZG9yIGRlIHByb2dyYW1hXG4gICAgICogZSBhdHJpYnVpIGVzdGUgdmFsb3IgcGFyYSBhIHByb3ByaWVkYWRlIFwib3Bjb2RlXCIgZGEgY3B1LlxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5idXNjYXJPcGNvZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIG9wY29kZXMgdGVtIDIgYnl0ZXMgKDE2IGJpdHMpLCBlbnTDo28sIHByZWNpc2Ftb3MganVudGFyIGRvaXMgYnl0ZXMuXG4gICAgICAgIC8vIFBvciBleGVtcGxvOiBzZSBvIHZhbG9yIGRvIHByaW1laXJvIGJ5dGUgZm9yIEEyLCBlIG8gZG8gc2VndW5kbyBmb3IgRjAsIFxuICAgICAgICAvLyBlbnTDo28gbyBvcGNvZGUgc2Vyw6EgQTJGMC5cbiAgICAgICAgLy8gXCJtZW1vcmlhW3BjXSA8PCA4XCIgY3JpYSA0IHplcm9zIG5vIG51bWVybyAoZW0gYmluYXJpbyksIGUgZGVwb2lzIGEgb3BlcmHDp8Ojb1xuICAgICAgICAvLyBiaXR3aXNlIE9SIGp1bnRhIG9zIDIgbnVtZXJvc1xuICAgICAgICB2YXIgcHJpbWVpcm8gPSB0aGlzLl9tZW1vcmlhW3RoaXMuX3BjXTtcbiAgICAgICAgdmFyIHNlZ3VuZG8gPSB0aGlzLl9tZW1vcmlhW3RoaXMuX3BjICsgMV07XG4gICAgICAgIHRoaXMuX29wY29kZSA9IChwcmltZWlybyA8PCA4KSB8IHNlZ3VuZG87XG4gICAgfTtcbiAgICBDaGlwOC5wcm90b3R5cGUuZXhlY3V0YXJPcGNvZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5fb3Bjb2RlICYgMHhGMDAwKSB7XG4gICAgICAgICAgICBjYXNlIDB4MDAwMDpcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGFyT3BfMHh4eCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDEwMDA6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF8xbm5uX2pwKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MjAwMDpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzJubm5fY2FsbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDMwMDA6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF8zeGtrX3NlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4NDAwMDpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzR4a2tfc25lKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4NTAwMDpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzV4eTBfc2UoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHg2MDAwOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfNnhra19sZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDcwMDA6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF83eGtrX2FkZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDgwMDA6XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRhck9wXzh4eHgoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHg5MDAwOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfOXh5MF9zbmUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHhBMDAwOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfYW5ubl9sZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweEIwMDA6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF9ibm5uX2ptcCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweEMwMDA6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF9jeGtrX3JuZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweEQwMDA6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF9keHluX2RyYXcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHhFMDAwOlxuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0YXJPcF9leHh4KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4RjAwMDpcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGFyT3BfZnh4eCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiT3Bjb2RlIGRlc2NvbmhlY2lkbzogXCIgKyB0aGlzLl9vcGNvZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENoaXA4LnByb3RvdHlwZS5leGVjdXRhck9wXzB4eHggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5fb3Bjb2RlICYgMHgwMEZGKSB7XG4gICAgICAgICAgICBjYXNlIDB4MDBFRTpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzAwZWVfcmV0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDBFMDpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzAwZTBfY2xyKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJPcGNvZGUgZGVzY29uaGVjaWRvOiBcIiArIHRoaXMuX29wY29kZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2hpcDgucHJvdG90eXBlLmV4ZWN1dGFyT3BfOHh4eCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLl9vcGNvZGUgJiAweDAwMEYpIHtcbiAgICAgICAgICAgIGNhc2UgMHgwMDAwOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfOHh5MF9sZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwMDE6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF84eHkxX29yKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDAwMjpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzh4eTJfYW5kKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDAwMzpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzh4eTNfeG9yKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDAwNDpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzh4eTRfYWRkKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDAwNTpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzh4eTVfc3ViKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDAwNjpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzh4MDZfc2hyKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDAwNzpcbiAgICAgICAgICAgICAgICB0aGlzLm9wXzh4eTdfc3VibigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwMEU6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF84eDBlX3NobCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiT3Bjb2RlIGRlc2NvbmhlY2lkbzogXCIgKyB0aGlzLl9vcGNvZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENoaXA4LnByb3RvdHlwZS5leGVjdXRhck9wX2V4eHggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5fb3Bjb2RlICYgMHgwMEZGKSB7XG4gICAgICAgICAgICBjYXNlIDB4MDA5RTpcbiAgICAgICAgICAgICAgICB0aGlzLm9wX2V4OWVfc2twKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDBBMTpcbiAgICAgICAgICAgICAgICB0aGlzLm9wX2V4YTFfc2tucCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiT3Bjb2RlIGRlc2NvbmhlY2lkbzogXCIgKyB0aGlzLl9vcGNvZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENoaXA4LnByb3RvdHlwZS5leGVjdXRhck9wX2Z4eHggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5fb3Bjb2RlICYgMHgwMEZGKSB7XG4gICAgICAgICAgICBjYXNlIDB4MDAwNzpcbiAgICAgICAgICAgICAgICB0aGlzLm9wX2Z4MDdfbGQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHgwMDBBOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfZngwYV9sZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwMTU6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF9meDE1X2xkKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDAxODpcbiAgICAgICAgICAgICAgICB0aGlzLm9wX2Z4MThfbGQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHgwMDFFOlxuICAgICAgICAgICAgICAgIHRoaXMub3BfZngxZV9hZGQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHgwMDI5OlxuICAgICAgICAgICAgICAgIHRoaXMub3BfZngyOV9sZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAweDAwMzM6XG4gICAgICAgICAgICAgICAgdGhpcy5vcF9meDMzX2xkKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDB4MDA1NTpcbiAgICAgICAgICAgICAgICB0aGlzLm9wX2Z4NTVfbGQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMHgwMDY1OlxuICAgICAgICAgICAgICAgIHRoaXMub3BfZng2NV9sZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiT3Bjb2RlIGRlc2NvbmhlY2lkbzogXCIgKyB0aGlzLl9vcGNvZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENMUlxuICAgICAqIExpbXBhIGEgdGVsYVxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF8wMGUwX2NsciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMjsgKytpKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDY0OyArK2opIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90ZWxhW2ldW2pdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kZXNlbmhhckZsYWcgPSB0cnVlO1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogT3Bjb2RlIDAwRUUsIHJldHVybmEgZGUgdW1hIHN1YnJvdGluYVxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF8wMGVlX3JldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fcGMgPSB0aGlzLl9zdGFja1t0aGlzLl9zcCAtIDFdO1xuICAgICAgICB0aGlzLl9zcCAtPSAxO1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSlAgZW5kZXJlY29cbiAgICAgKiBPcGNvZGUgMW5ubjogcHVsYSBvIHByb2dyYW1hIHBhcmEgdW0gZW5kZXJlw6dvLCBvbmRlIG5ubiDDqSBvIGVuZGVyZcOnb1xuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF8xbm5uX2pwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9wYyA9IHRoaXMubm5uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogT3Bjb2RlIDJubm46IHB1bGEgbyBwcm9ncmFtYSBwYXJhIHVtYSBzdWJyb3RpbmEsIG9uZGUgbm5uIMOpIG8gZW5kZXJlw6dvIGRhIHN1YnJvdGluYS5cbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfMm5ubl9jYWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBndWFyZGEgbyBlbmRlcmXDp28gYXR1YWwgZG8gcHJvZ3JhbWEgbmEgc3RhY2tcbiAgICAgICAgdGhpcy5fc3RhY2tbdGhpcy5fc3BdID0gdGhpcy5fcGM7XG4gICAgICAgIHRoaXMuX3NwICs9IDE7XG4gICAgICAgIHRoaXMuX3BjID0gdGhpcy5ubm47XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBPcGNvZGUgM3hrazogcHVsYSBhIHByb3hpbWEgaW5zdHJ1w6fDo28gc2Uga2sgZm9yIGlndWFsIGEgVnhcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfM3hra19zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3ZbdGhpcy54XSA9PT0gdGhpcy5raykge1xuICAgICAgICAgICAgdGhpcy5fcGMgKz0gNDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE9wY29kZSA0eGtrOiBwdWxhIGEgcHJveGltYSBpbnN0cnXDp8OjbyBzZSBrayBmb3IgZGlmZXJlbnRlIGRlIFZ4XG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wXzR4a2tfc25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fdlt0aGlzLnhdICE9PSB0aGlzLmtrKSB7XG4gICAgICAgICAgICB0aGlzLl9wYyArPSA0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogT3Bjb2RlIDV4eTA6IHB1bGEgYSBwcm94aW1hIGluc3RydcOnw6NvIHNlIFZ4IGZvciBpZ3VhbCBhIFZ5XG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wXzV4eTBfc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl92W3RoaXMueF0gPT09IHRoaXMuX3ZbdGhpcy55XSkge1xuICAgICAgICAgICAgdGhpcy5fcGMgKz0gNDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExEIFZ4LCBieXRlXG4gICAgICogT3Bjb2RlIDZ4a2s6IGd1YXJkYSBvIHZhbG9yIGtrIGVtIFZ4XG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wXzZ4a2tfbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3ZbdGhpcy54XSA9IHRoaXMua2s7XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBREQgVngsIGJ5dGVcbiAgICAgKiBPcGNvZGUgN3hrazogYWRpY2lvbmEgbyB2YWxvciBrayBhbyByZWdpc3RyYWRvciBWeFxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF83eGtrX2FkZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdlt0aGlzLnhdICs9IHRoaXMua2s7XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMRCBWeCwgVnlcbiAgICAgKiBvcGNvZGUgOHh5MDogc2FsdmEgbyB2YWxvciBkZSBWeSBubyByZWdpc3RyYWRvciBWeFxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF84eHkwX2xkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl92W3RoaXMueF0gPSB0aGlzLl92W3RoaXMueV07XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBPUiBWeCwgVnlcbiAgICAgKiBvcGNvZGUgOHh5MTogcGVyZm9ybWEgdW1hIHVtYSBvcGVyYcOnw6NvIGJpdHdpc2UgT1JcbiAgICAgKiBub3MgdmFsb3JlcyBkZSBWeCBlIFZ5LCBlIHNhbHZhIG8gcmVzdWx0YWRvIG5vXG4gICAgICogcmVnaXN0cmFkb3IgVnhcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfOHh5MV9vciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdlt0aGlzLnhdIHw9IHRoaXMuX3ZbdGhpcy55XTtcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFORCBWeCwgVnlcbiAgICAgKiBvcGNvZGUgOHh5MjogcGVyZm9ybWEgdW1hIHVtYSBvcGVyYcOnw6NvIGJpdHdpc2UgQU5EXG4gICAgICogbm9zIHZhbG9yZXMgZGUgVnggZSBWeSwgZSBzYWx2YSBvIHJlc3VsdGFkbyBub1xuICAgICAqIHJlZ2lzdHJhZG9yIFZ4XG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wXzh4eTJfYW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl92W3RoaXMueF0gJj0gdGhpcy5fdlt0aGlzLnldO1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgKiBYT1IgVngsIFZ5XG4gICAgKiBvcGNvZGUgOHh5MzogcGVyZm9ybWEgdW1hIHVtYSBvcGVyYcOnw6NvIGJpdHdpc2UgWE9SIChPUiBleGNsdXNpdm8pXG4gICAgKiBub3MgdmFsb3JlcyBkZSBWeCBlIFZ5LCBlIHNhbHZhIG8gcmVzdWx0YWRvIG5vXG4gICAgKiByZWdpc3RyYWRvciBWeFxuICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wXzh4eTNfeG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl92W3RoaXMueF0gXj0gdGhpcy5fdlt0aGlzLnldO1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQUREIFZ4LCBWeVxuICAgICAqIG9wY29kZSA4eHk0OiBhZGljaW9uYSBvIHZhbG9yIGRlIFZ5IGEgVnggZSBhdGl2YSBhIGNhcnJ5IGZsYWdcbiAgICAgKiBkbyByZWdpc3RyYWRvciBWRiBjYXNvIG8gcmVzdWx0YWRvIHNlamEgbWFpb3IgZG8gcXVlIDI1NVxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF84eHk0X2FkZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdlt0aGlzLnhdICs9IHRoaXMuX3ZbdGhpcy55XTtcbiAgICAgICAgdGhpcy5fdlsweEZdID0gKyh0aGlzLl92W3RoaXMueF0gPiAyNTUpO1xuICAgICAgICAvKlxuICAgICAgICBpZiAodGhpcy5fdlt0aGlzLnhdID4gMjU1KSB7XG4gICAgICAgICAgICB0aGlzLl92W3RoaXMueF0gLT0gMjU2O1xuICAgICAgICB9XG4gICAgICAgICovXG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTVUIgVngsIFZ5XG4gICAgICogb3Bjb2RlIDh4eTU6IHN1YnRyYWkgVnggcG9yIFZ5IGUgZ3VhcmRhIG8gcmVzdWx0YWRvIGVtIFZ4LlxuICAgICAqIENhc28gVnggc2VqYSBtYWlvciBxdWUgVnksIFZGIMOpIGlndWFsIGEgMSwgZSBjYXNvIG8gY29udHJhcmlvXG4gICAgICogw6kgaWd1YWwgYSAwXG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wXzh4eTVfc3ViID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl92WzB4Rl0gPSArKHRoaXMuX3ZbdGhpcy54XSA+IHRoaXMuX3ZbdGhpcy55XSk7XG4gICAgICAgIHRoaXMuX3ZbdGhpcy54XSAtPSB0aGlzLl92W3RoaXMueV07XG4gICAgICAgIC8qXG4gICAgICAgIGlmICh0aGlzLl92W3RoaXMueF0gPCAwKSB7XG4gICAgICAgICAgICB0aGlzLl92W3RoaXMueF0gKz0gMjU2O1xuICAgICAgICB9XG4gICAgICAgICovXG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTSFIgVnhcbiAgICAgKiBvcGNvZGUgOHgwNjogZGVzbG9jYSBvIG7Dum1lcm8gdW1hIGNhc2EgKGVtIGJpbsOhcmlvKSBwYXJhIGEgZGlyZWl0YSAocmlnaHQgc2hpZnQpLlxuICAgICAqIE8gYml0IG1lbm9zIHNpZ25pZmljYXRpdm8gZG8gdmFsb3Igb3JpZ2luYWwgZGUgVnggw6kgc2Fsdm8gbm9cbiAgICAgKiByZWdpc3RyYWRvciBWRlxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF84eDA2X3NociA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZ4ID0gdGhpcy5fdlt0aGlzLnhdO1xuICAgICAgICB0aGlzLl92WzB4Rl0gPSAweDEgJiB2eDtcbiAgICAgICAgdGhpcy5fdlt0aGlzLnhdID0gdnggPj4gMTtcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNVQk4gVngsIFZ5XG4gICAgICogb3Bjb2RlIDh4eTc6IHN1YnRyYWkgVnkgcG9yIFZ4IGUgZ3VhcmRhIG8gcmVzdWx0YWRvIGVtIFZ4LlxuICAgICAqIENhc28gVnggc2VqYSBtYWlvciBxdWUgVnksIFZGIMOpIGlndWFsIGEgMSwgZSBjYXNvIG8gY29udHJhcmlvXG4gICAgICogw6kgaWd1YWwgYSAwXG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wXzh4eTdfc3VibiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZ4ID0gdGhpcy5fdlt0aGlzLnhdO1xuICAgICAgICB2YXIgdnkgPSB0aGlzLl92W3RoaXMueV07XG4gICAgICAgIHRoaXMuX3ZbMHhGXSA9IHZ5ID4gdnggPyAxIDogMDtcbiAgICAgICAgdGhpcy5fdlt0aGlzLnhdID0gdnkgLSB2eDtcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNITCBWeFxuICAgICAqIG9wY29kZSA4eDBFOiBkZXNsb2NhIG8gbsO6bWVybyB1bWEgY2FzYSAoZW0gYmluw6FyaW8pIHBhcmEgYSBlc3F1ZXJkYSAobGVmdCBzaGlmdCkuXG4gICAgICogTyBiaXQgbWFpcyBzaWduaWZpY2F0aXZvIGRvIHZhbG9yIG9yaWdpbmFsIGRlIFZ4IMOpIHNhbHZvIG5vXG4gICAgICogcmVnaXN0cmFkb3IgVkZcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfOHgwZV9zaGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2eCA9IHRoaXMuX3ZbdGhpcy54XTtcbiAgICAgICAgLypcbiAgICAgICAgdGhpcy5fdlsweEZdID0gKyh0aGlzLl92W3RoaXMueF0gJiAweDgwKTtcbiAgICAgICAgdGhpcy5fdlt0aGlzLnhdIDw8PSAxO1xuICAgICAgICAqL1xuICAgICAgICB0aGlzLl92WzB4Rl0gPSB2eCA+PiA3O1xuICAgICAgICB0aGlzLl92W3RoaXMueF0gPSB2eCA8PCAxO1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU05FIFZ4LCBWeVxuICAgICAqIFB1bGEgYSBwcm94aW1hIGluc3RydcOnw6NvIHNlIFZ4IGZvciBkaWZlcmVudGUgZGUgVnlcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfOXh5MF9zbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl92W3RoaXMueF0gIT09IHRoaXMuX3ZbdGhpcy55XSkge1xuICAgICAgICAgICAgdGhpcy5fcGMgKz0gNDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEpNUCBWMCwgZW5kZXJlY29cbiAgICAgKiBQdWxhIHBhcmEgbyBlbmRlcmXDp28gbm5uICsgVjBcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfYW5ubl9sZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5faSA9IHRoaXMubm5uO1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSk1QIFYwLCBlbmRlcmVjb1xuICAgICAqIFB1bGEgcGFyYSBvIGVuZGVyZcOnbyBubm4gKyBWMFxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF9ibm5uX2ptcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fcGMgPSB0aGlzLl92W3RoaXMueF0gKyB0aGlzLm5ubjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJORCBWeCwgYnl0ZVxuICAgICAqIFZ4ID0gYnl0ZSBhbGVhdMOzcmlvICYga2tcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfY3hra19ybmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBieXRlX2FsZWF0b3JpbyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDB4RkYpICYgKHRoaXMuX29wY29kZSAmIDB4RkYpO1xuICAgICAgICB0aGlzLl92W3RoaXMueF0gPSBieXRlX2FsZWF0b3JpbyAmIHRoaXMua2s7XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICBDaGlwOC5wcm90b3R5cGUuc2V0UGl4ZWwgPSBmdW5jdGlvbiAocG9zX3gsIHBvc195LCBmaW1fc3ByaXRlKSB7XG4gICAgICAgIHZhciBjb2xpc2FvID0gMDtcbiAgICAgICAgdmFyIHNwcml0ZSA9IHRoaXMuX21lbW9yaWEuc2xpY2UodGhpcy5faSwgZmltX3Nwcml0ZSArIDEpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwcml0ZS5sZW5ndGggLSAxOyArK2kpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgODsgKytqKSB7XG4gICAgICAgICAgICAgICAgdmFyIHggPSAocG9zX3ggKyBqKSAlIDY0O1xuICAgICAgICAgICAgICAgIHZhciB5ID0gKHBvc195ICsgaSkgJSAzMjtcbiAgICAgICAgICAgICAgICBpZiAoKHNwcml0ZVtpXSAmICgweDgwID4+IGopKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fdGVsYVt5XVt4XSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29saXNhbyA9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGVsYVt5XVt4XSBePSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kZXNlbmhhckZsYWcgPSB0cnVlO1xuICAgICAgICByZXR1cm4gY29saXNhbztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERlc2VuaGEgdW0gc3ByaXRlIG5hIGNvb3JkZW5hZGEgKFZ4LCBWeSksIGNvbSA4IHBpeGVscyBkZSBsYXJndXJhIGUgTiBkZSBhbHR1cmFcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfZHh5bl9kcmF3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbiA9IHRoaXMuX29wY29kZSAmIDB4MDAwRjtcbiAgICAgICAgdmFyIGZpbV9zcHJpdGUgPSB0aGlzLl9pICsgbjtcbiAgICAgICAgdGhpcy5fdlsweEZdID0gdGhpcy5zZXRQaXhlbCh0aGlzLl92W3RoaXMueF0sIHRoaXMuX3ZbdGhpcy55XSwgZmltX3Nwcml0ZSk7XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTS1AgVnhcbiAgICAgKiBwdWxhIGEgcHLDs3hpbWEgaW5zdHJ1w6fDo28gc2UgYSB0ZWNsYSBjb20gbyB2YWxvciBkZSBWeCBlc3RpdmVyIHNlbmRvIHByZXNzaW9uYWRhXG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wX2V4OWVfc2twID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGVjbGEgPSB0aGlzLl92W3RoaXMueF07XG4gICAgICAgIGlmICh0aGlzLl90ZWNsYWRvW3RlY2xhXSAhPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fcGMgKz0gNDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNLTlAgVnhcbiAgICAgKiBwdWxhIGEgcHLDs3hpbWEgaW5zdHJ1w6fDo28gc2UgYSB0ZWNsYSBjb20gbyB2YWxvciBkZSBWeCBuw6NvIGVzdGl2ZXIgc2VuZG8gcHJlc3Npb25hZGFcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfZXhhMV9za25wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGVjbGEgPSB0aGlzLl92W3RoaXMueF07XG4gICAgICAgIGlmICh0aGlzLl90ZWNsYWRvW3RlY2xhXSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fcGMgKz0gNDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExEIFZ4LCBLXG4gICAgICogRXNwZXJhIG8gdXN1w6FyaW8gcHJlc3Npb25hciB1bWEgdGVjbGEsIGUgYXRyaWJ1aSBvIHZhbG9yIGEgVnhcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfZngwYV9sZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fZXNwZXJhbmRvUmVnaXN0cmFkb3IgPSB0aGlzLng7XG4gICAgICAgIHRoaXMuX2VzcGVyYW5kb0lucHV0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExEIFZ4LCBERUxBWV9USU1FUlxuICAgICAqIEF0cmlidWkgbyB2YWxvciBkbyB0ZW1wb3JpemFkb3IgZGUgZGVsYXkgYW8gVnhcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfZngwN19sZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdlt0aGlzLnhdID0gdGhpcy5fZGVsYXlUZW1wbztcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExEIERFTEFZX1RJTUVSLCBWeFxuICAgICAqIEF0cmlidWkgbyB2YWxvciBkZSBWeCBhbyB0ZW1wb3JpemFkb3IgZGUgZGVsYXlcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfZngxNV9sZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fZGVsYXlUZW1wbyA9IHRoaXMuX3ZbdGhpcy54XTtcbiAgICAgICAgdGhpcy5fcGMgKz0gMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExEIFNPVU5EX1RJTUVSLCBWeFxuICAgICAqIEF0cmlidWkgbyB2YWxvciBkZSBWeCBhbyB0ZW1wb3JpemFkb3IgZGUgc29tXG4gICAgICovXG4gICAgQ2hpcDgucHJvdG90eXBlLm9wX2Z4MThfbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3NvbVRlbXBvID0gdGhpcy5fdlt0aGlzLnhdO1xuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQUREIEksIFZ4XG4gICAgICogSSA9IEkgKyBWeFxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF9meDFlX2FkZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5faSArPSB0aGlzLl92W3RoaXMueF07XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMRCBGLCBWeFxuICAgICAqIEF0cmlidWkgYW8gSSBvIGVuZGVyZcOnbyBkbyBzcHJpdGUgY29ycmVzcG9uZGVudGUgw6AgVnhcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfZngyOV9sZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5faSA9IHRoaXMueCAqIDU7XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMRCBCLCBWeFxuICAgICAqIG9wY29kZSBGeDMzOiBHdWFyZGEgYSByZXByZXNlbnRhw6fDo28gZW0gY29kaWZpY2HDp8OjbyBiaW7DoXJpYSBkZWNpbWFsIChCQ0QpXG4gICAgICogZG8gdmFsb3IgZG8gcmVnaXN0cmFkb3IgVnguIE8gZGlnaXRvIG5hIGNhc2EgZGFzIGNlbnRlbmFzIHNlcsOhIHNhbHZvIG5vXG4gICAgICogZW5kZXJlw6dvIFwiaVwiIChvIHJlZ2lzdHJhZG9yIGRlIGluZGV4KSwgYSBjYXNhIGRhcyBkZXplbmFzIHNlcsOhIHNhbHZhIG5vXG4gICAgICogZW5kZXJlw6dvIFwiaSArIDFcIiwgZSBvIGRpZ2l0byBkYSBjYXNhIGRhcyB1bmlkYWRlcyBlcsOhIHNhbHZvIGVtIFwiaSArIDJcIlxuICAgICAqL1xuICAgIENoaXA4LnByb3RvdHlwZS5vcF9meDMzX2xkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsb3IgPSB0aGlzLl92W3RoaXMueF07XG4gICAgICAgIHRoaXMuX21lbW9yaWFbdGhpcy5faV0gPSB2YWxvciAvIDEwMDtcbiAgICAgICAgdGhpcy5fbWVtb3JpYVt0aGlzLl9pICsgMV0gPSAodmFsb3IgLyAxMCkgJSAxMDtcbiAgICAgICAgdGhpcy5fbWVtb3JpYVt0aGlzLl9pICsgMl0gPSAodmFsb3IgJSAxMDApICUgMTA7XG4gICAgICAgIHRoaXMuX3BjICs9IDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMRCBbSV0sIFZ4XG4gICAgICogR3VhcmRhIG9zIHZhbG9yZXMgZGUgVjAgw6AgVnggbmEgbWVtw7NyaWEgYSBwYXJ0aXIgZG8gZW5kZXJlw6dvIElcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfZng1NV9sZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gdGhpcy54OyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuX21lbW9yaWFbaSArIHRoaXMuX2ldID0gdGhpcy5fdltpXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTEQgVngsIFtJXVxuICAgICAqIFByZWVuY2hlIG9zIHJlZ2lzdHJhZG9yZXMgZGUgVjAgw6AgVnggY29tIHZhbG9yZXMgbmEgbWVtw7NyaWEgYSBwYXJ0aXIgZG8gZW5kZXJlw6dvIElcbiAgICAgKi9cbiAgICBDaGlwOC5wcm90b3R5cGUub3BfZng2NV9sZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gdGhpcy54OyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuX3ZbaV0gPSB0aGlzLl9tZW1vcmlhW2kgKyB0aGlzLl9pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wYyArPSAyO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENoaXA4LnByb3RvdHlwZSwgXCJ2XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENoaXA4LnByb3RvdHlwZSwgXCJvcGNvZGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vcGNvZGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGlwOC5wcm90b3R5cGUsIFwibm5uXCIsIHtcbiAgICAgICAgLyoqIEFzIDMgw7psdGltYXMgY2FzYXMgKGVtIGhleGFkZWNpbWFsKSBkbyBvcGNvZGUgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3Bjb2RlICYgMHgwRkZGO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2hpcDgucHJvdG90eXBlLCBcImtrXCIsIHtcbiAgICAgICAgLyoqIEFzIDIgw7psdGltYXMgY2FzYXMgKGVtIGhleGFkZWNpbWFsKSBkbyBvcGNvZGUgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3Bjb2RlICYgMHgwMEZGO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2hpcDgucHJvdG90eXBlLCBcInhcIiwge1xuICAgICAgICAvKiogTyBuw7ptZXJvIG5hIHNlZ3VuZGEgY2FzYSAoZGEgZXNxdWVyZGEgcHJhIGRpcmVpdGEgZW0gaGV4YWRlY2ltYWwpIGRvIG9wY29kZSAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5fb3Bjb2RlICYgMHgwRjAwKSA+PiA4O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2hpcDgucHJvdG90eXBlLCBcInlcIiwge1xuICAgICAgICAvKiogTyBuw7ptZXJvIG5hIHRlcmNlaXJhIGNhc2EgKGRhIGVzcXVlcmRhIHByYSBkaXJlaXRhIGVtIGhleGFkZWNpbWFsKSBkbyBvcGNvZGUgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuX29wY29kZSAmIDB4MDBGMCkgPj4gNDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENoaXA4LnByb3RvdHlwZSwgXCJkZXNlbmhhckZsYWdcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZXNlbmhhckZsYWc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIENoaXA4Lk1FTU9SSUFfVEFNQU5ITyA9IDB4MTAwMDtcbiAgICByZXR1cm4gQ2hpcDg7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgQ2hpcDg7XG4iLCJpbXBvcnQgUmVuZGVyaXphZG9yQ2FudmFzIGZyb20gJy4vcmVuZGVyaXphZG9yQ2FudmFzJztcbmltcG9ydCBDaGlwOCBmcm9tICcuL2NoaXA4JztcbjtcbnZhciBjdHggPSBzZWxmO1xudmFyIHJlbmRlciA9IG5ldyBSZW5kZXJpemFkb3JDYW52YXMoJ2NhbnZhcyNjaGlwLTgnKTtcbnZhciBjaGlwOCA9IG5ldyBDaGlwOChyZW5kZXIpO1xudmFyIGpvZ29DYXJyZWdhZG8gPSBmYWxzZTtcbnZhciBhdHVhbGl6YXJGcmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoam9nb0NhcnJlZ2Fkbykge1xuICAgICAgICBjaGlwOC5lbXVsYXJDaWNsbygpO1xuICAgICAgICBjaGlwOC5yZW5kZXJpemFyKCk7XG4gICAgfVxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYXR1YWxpemFyRnJhbWUpO1xufTtcbndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYXR1YWxpemFyRnJhbWUpO1xuY3R4Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudG8pIHtcbiAgICB2YXIgZGFkb3MgPSBldmVudG8uZGF0YTtcbiAgICBpZiAoZGFkb3MubWVuc2FnZW0gPT09ICdjYXJyZWdhcicpIHtcbiAgICAgICAgaWYgKCEoZGFkb3Mucm9tIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgICAgIHdpbmRvdy5hbGVydCgnRXJybyBhbyBsZXIgYXJxdWl2bycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYWRvcy5yZXNldGFyKSB7XG4gICAgICAgICAgICBjaGlwOC5yZXNldGFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2hpcDguY2FycmVnYXJQcm9ncmFtYShkYWRvcy5yb20pO1xuICAgICAgICBqb2dvQ2FycmVnYWRvID0gdHJ1ZTtcbiAgICB9XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n')}]);